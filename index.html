<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Synthesis Course Collection: 26 interactive evidence synthesis and meta-analysis training courses covering systematic reviews, GRADE, DTA, HTA, and more.">
    <meta name="theme-color" content="#141B3D">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Synthesis Course Collection â€” Evidence Synthesis Training</title>
    <meta property="og:title" content="Synthesis Course Collection - Evidence Synthesis Training">
    <meta property="og:description" content="26 interactive courses on meta-analysis, systematic reviews, and evidence synthesis methods. Free, open-access training materials.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/synthesis-courses/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Synthesis Course Collection">
    <meta name="twitter:description" content="26 interactive courses on evidence synthesis and meta-analysis">
    <link rel="canonical" href="index.html">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“š</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --navy: #1E2761;
            --deep-navy: #141B3D;
            --gold: #D4AF37;
            --gold-dim: rgba(212,175,55,0.2);
            --cream: #FAF8F5;
            --card-bg: rgba(255,255,255,0.04);
            --card-border: rgba(212,175,55,0.15);
            --text: #e2e8f0;
            --text-muted: #b0bec5;
            --green: #22c55e;
            --red: #C53030;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Source Sans Pro', 'Segoe UI', system-ui, sans-serif;
            background: var(--deep-navy);
            color: var(--text);
            min-height: 100vh;
        }

        /* === HEADER === */
        header {
            text-align: center;
            padding: 3rem 1rem 2rem;
            padding-top: max(3rem, env(safe-area-inset-top));
            background: linear-gradient(180deg, var(--deep-navy) 0%, #0a0f1a 100%);
            border-bottom: 1px solid var(--gold-dim);
        }
        header h1 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 2.4rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }
        header p {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }
        .stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        .stat { text-align: center; }
        .stat-number {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--gold);
        }
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* === LANGUAGE SELECTOR === */
        .lang-selector {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
            font-size: 0.75rem;
        }
        .lang-selector a, .lang-selector .lang-current {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            text-decoration: none;
            transition: background 0.2s, color 0.2s;
        }
        .lang-selector a {
            color: var(--text-muted);
            background: rgba(255,255,255,0.05);
            border: 1px solid transparent;
        }
        .lang-selector a:hover, .lang-selector a:focus {
            color: var(--gold);
            background: rgba(212,175,55,0.15);
            border-color: var(--gold-dim);
        }
        .lang-selector .lang-current {
            color: var(--gold);
            background: rgba(212,175,55,0.2);
            border: 1px solid var(--gold);
            font-weight: 600;
        }

        /* === SEARCH === */
        .search-bar {
            max-width: 500px;
            margin: 2rem auto 0;
            position: relative;
        }
        .search-bar input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border-radius: 8px;
            border: 1px solid var(--gold-dim);
            background: rgba(255,255,255,0.05);
            color: var(--text);
            font-family: inherit;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.2s;
        }
        .search-bar input:focus {
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(212,175,55,0.25);
        }
        /* Fix #9: Replace emoji search icon with SVG data URI magnifying glass */
        .search-bar::before {
            content: "";
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 1rem;
            height: 1rem;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23b0bec5' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cline x1='16.5' y1='16.5' x2='21' y2='21'/%3E%3C/svg%3E") no-repeat center / contain;
            pointer-events: none;
        }
        .search-hint {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 4px;
            padding: 0.1rem 0.4rem;
            pointer-events: none;
        }
        /* Fix #8: Hide search hint when input has value */
        .search-hint.hidden {
            display: none;
        }
        /* Fix #5: Format minified CSS for search-clear */
        .search-clear {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gold);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 4px 8px;
            min-height: 44px;
            min-width: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            opacity: 0.7;
        }
        .search-clear:hover {
            opacity: 1;
        }
        .search-clear.hidden {
            display: none;
        }

        /* === FILTER TABS === */
        .filter-nav {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.5rem auto;
            flex-wrap: wrap;
            max-width: 900px;
            padding: 0 1rem;
        }
        .filter-tab {
            padding: 0.65rem 1.4rem;
            min-height: 44px;
            min-width: 44px;
            border-radius: 20px;
            border: 1px solid var(--gold-dim);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.85rem;
            transition: background 0.2s, border-color 0.2s, color 0.2s;
        }
        .filter-tab:hover {
            background: rgba(212,175,55,0.15);
            border-color: var(--gold);
            color: var(--cream);
        }
        .filter-tab:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .filter-tab:focus:not(:focus-visible) {
            outline: none;
        }
        .filter-tab:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .filter-tab:active {
            transform: scale(0.97);
        }
        .filter-tab[aria-pressed="true"] {
            background: var(--gold);
            color: var(--navy);
            border-color: var(--gold);
            font-weight: 600;
        }

        /* === LEARNING PATH === */
        .learning-path {
            max-width: 1100px;
            margin: 0 auto;
            padding: 1.5rem 1.5rem 0;
        }
        /* Fix #12: Hide learning path when filtering by category */
        .learning-path.hidden {
            display: none;
        }
        .path-box {
            background: linear-gradient(135deg, rgba(212,175,55,0.08), rgba(30,39,97,0.15));
            border: 1px solid var(--gold-dim);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
        }
        .path-title {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 0.75rem;
        }
        h2.path-title {
            margin-top: 0;
            font-size: 1.1rem;
        }
        .path-steps {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
        }
        .path-step {
            background: rgba(255,255,255,0.06);
            border: 1px solid var(--gold-dim);
            border-radius: 6px;
            padding: 0.65rem 1.2rem;
            min-height: 44px;
            color: var(--cream);
            text-decoration: none;
            transition: background 0.2s, border-color 0.2s, transform 0.2s ease, box-shadow 0.2s ease;
        }
        .path-step:hover {
            background: rgba(212,175,55,0.2);
            border-color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212,175,55,0.3);
        }
        .path-step:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .path-step:focus:not(:focus-visible) {
            outline: none;
        }
        .path-step:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .path-arrow {
            color: var(--gold);
            font-size: 1rem;
            transition: transform 0.2s ease;
        }

        /* === MAIN CONTENT === */
        main {
            max-width: 1100px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        /* Nit #13: Section title transitions - opacity transition to match card fade behavior */
        .section-title {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            /* Nit #13: Section title transition to match card fade behavior */
            transition: opacity 0.3s ease;
            border-bottom: 1px solid var(--gold-dim);
            color: var(--gold);
            opacity: 1;
        }
        .section-title.hidden {
            opacity: 0;
            position: absolute;
            visibility: hidden;
        }
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(min(320px, 100%), 1fr));
            gap: 1rem;
        }

        /* === COURSE CARDS === */
        .course-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 1.25rem;
            /* Fix #16: Scope transition to specific properties + opacity for fade + enhanced micro-interactions */
            transition: opacity 0.3s ease, transform 0.3s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            /* Fix #13: Cards start visible */
            opacity: 1;
        }
        /* Fix #13: Two-phase fade-in/out for filtered cards */
        .course-card.card-hidden {
            opacity: 0;
            pointer-events: none;
        }
        .course-card.card-gone {
            position: absolute;
            visibility: hidden;
        }
        .course-card:hover {
            border-color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(212,175,55,0.12);
        }
        .course-card:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .course-card:focus:not(:focus-visible) {
            outline: none;
        }
        .course-card:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .course-card .card-top {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        /* Fix #1: h3 inside cards needs margin reset */
        .course-card h3.title {
            margin: 0;
            font-family: inherit;
        }
        .course-card .title {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--cream);
            line-height: 1.3;
        }
        /* Fix #17: Line-clamp on card descriptions */
        /* Nit #10: -webkit-line-clamp is vendor-prefixed; standard line-clamp not yet available in all browsers */
        .course-card .desc {
            font-size: 0.82rem;
            color: var(--text-muted);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* Minor #6: Search result highlighting with pop animation */
        .course-card mark {
            background: rgba(212,175,55,0.35);
            color: inherit;
            padding: 0.1em 0.2em;
            border-radius: 2px;
            animation: highlightPop 0.3s ease-out;
        }
        @keyframes highlightPop {
            from { background: transparent; }
            to { background: rgba(212,175,55,0.35); }
        }
        .course-card .meta {
            font-size: 0.72rem;
            color: rgba(255,255,255,0.78);
            margin-top: auto;
            padding-top: 0.25rem;
        }

        /* === TAGS === */
        .tag {
            display: inline-block;
            padding: 0.15rem 0.6rem;
            border-radius: 12px;
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            width: fit-content;
            flex-shrink: 0;
        }
        .tag-core        { background: #164e63; color: #67e8f9; }
        .tag-methods     { background: #1e3a5f; color: #93c5fd; }
        .tag-specialty   { background: #3b0764; color: #d8b4fe; }
        .tag-applied     { background: #14532d; color: #86efac; }
        .tag-meta        { background: #78350f; color: #fcd34d; }
        .lang-badge {
            font-size: 0.65rem;
            color: rgba(255,255,255,0.75);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            padding: 0.1rem 0.35rem;
        }

        /* === NO RESULTS === */
        .no-results {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-muted);
            font-size: 1rem;
        }
        .no-results.hidden { display: none !important; }
        .no-results .suggestions {
            margin-top: 0.75rem;
            font-size: 0.9rem;
            color: var(--gold);
        }
        .suggestion-pill {
            display: inline-flex;
            align-items: center;
            min-height: 44px;
            margin: 0.3rem 0.2rem;
            padding: 0.3rem 0.75rem;
            border-radius: 20px;
            border: 1px solid var(--gold-dim);
            background: rgba(212,175,55,0.1);
            color: var(--gold);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
        }
        .suggestion-pill:hover {
            background: rgba(212,175,55,0.25);
            border-color: var(--gold);
        }
        .suggestion-pill:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .suggestion-pill:focus:not(:focus-visible) {
            outline: none;
        }
        .suggestion-pill:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .suggestion-clear {
            display: inline-flex;
            align-items: center;
            min-height: 44px;
            margin-top: 1rem;
            padding: 0.5rem 1.2rem;
            border-radius: 8px;
            border: 1px solid var(--gold-dim);
            background: transparent;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s, color 0.2s;
        }
        .suggestion-clear:hover {
            background: rgba(255,255,255,0.08);
            border-color: var(--gold);
            color: var(--cream);
        }
        .suggestion-clear:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .suggestion-clear:focus:not(:focus-visible) {
            outline: none;
        }
        .suggestion-clear:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }

        /* === DETAILS ARCHIVE === */
        .archive-section { margin-top: 2rem; }
        .archive-section summary {
            cursor: pointer;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding: 0.5rem 0;
        }
        .archive-section summary:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .archive-section summary:focus:not(:focus-visible) {
            outline: none;
        }
        .archive-section summary:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        /* Archive details open/close animation */
        .archive-section[open] summary ~ * {
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === FOOTER === */
        footer {
            text-align: center;
            padding: 2rem 1rem;
            padding-bottom: max(2rem, env(safe-area-inset-bottom));
            color: var(--text-muted);
            font-size: 0.85rem;
            border-top: 1px solid var(--gold-dim);
            margin-top: 3rem;
            background: var(--deep-navy);
        }

        /* === BACK TO TOP === */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: max(1rem, env(safe-area-inset-right, 1rem));
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--gold);
            color: var(--deep-navy);
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.3s, visibility 0.3s, transform 0.2s;
        }
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        .back-to-top:hover {
            transform: translateY(-3px) scale(1.05);
            background: var(--gold);
            color: var(--navy);
        }
        .back-to-top:focus {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }
        .back-to-top:focus:not(:focus-visible) {
            outline: none;
        }
        .back-to-top:focus-visible {
            outline: 2px solid var(--gold);
            outline-offset: 2px;
        }

        /* === SKIP LINK === */
        /* Fix #5: Format minified CSS for skip-link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--gold);
            color: var(--navy);
            padding: 8px 16px;
            z-index: 100;
            transition: top 0.3s;
            font-family: 'Source Sans Pro', sans-serif;
            text-decoration: none;
            font-weight: 600;
        }
        .skip-link:focus {
            top: 0;
        }

        /* === SKELETON/LOADING STATE (Minor #8) === */
        @keyframes skeleton-pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        .stat-number[aria-busy="true"] {
            animation: skeleton-pulse 1.5s ease-in-out infinite;
        }

        /* === UTILITY === */
        .hidden { display: none !important; }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            clip-path: inset(50%);
            white-space: nowrap;
            border: 0;
        }

        /* === RESPONSIVE === */

        /* Tablet breakpoint: 2-column grid */
        @media (max-width: 768px) and (min-width: 601px) {
            .course-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            header { padding: 2rem 1rem 1.5rem; }
            header h1 { font-size: 1.6rem; }
            .course-grid { grid-template-columns: 1fr; }
            .path-steps { flex-direction: column; align-items: flex-start; }
            .path-arrow { transform: rotate(90deg); }
        }

        /* Narrow screens: horizontal scroll for filter tabs and language selector */
        @media (max-width: 480px) {
            .filter-nav {
                overflow-x: auto;
                flex-wrap: nowrap;
                justify-content: flex-start;
                padding: 0.5rem 1rem;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
            }
            .filter-nav::-webkit-scrollbar { display: none; }
            .filter-tab { flex-shrink: 0; }

            /* Collapsible/scrollable language selector on mobile */
            .lang-selector-wrapper {
                position: relative;
            }
            .lang-selector-wrapper::after {
                content: '';
                position: absolute;
                right: 0;
                top: 0;
                bottom: 0;
                width: 30px;
                background: linear-gradient(to right, transparent, var(--deep-navy));
                pointer-events: none;
            }
            .lang-selector {
                max-width: 100%;
                overflow-x: auto;
                justify-content: flex-start;
                padding: 0 1rem;
                flex-wrap: nowrap;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
            }
            .lang-selector::-webkit-scrollbar { display: none; }
            .lang-selector a, .lang-selector .lang-current {
                flex-shrink: 0;
            }

            /* Search bar improvements for narrow screens */
            .search-bar {
                margin: 1.5rem 1rem 0;
                max-width: calc(100% - 2rem);
            }
            .search-bar input {
                padding-right: 3rem; /* Space for clear button */
            }
            .search-hint {
                display: none; /* Hide hint on very narrow screens to avoid overlap */
            }
            .search-clear {
                right: 8px;
            }
        }

        /* === REDUCED MOTION === */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            .course-card,
            .course-card:hover,
            .back-to-top,
            .back-to-top:hover {
                transform: none !important;
            }
        }

        /* === PRINT === */
        @media print {
            body { background: white; color: #222; }
            header { background: none; border-bottom: 2px solid #333; }
            header h1 { color: #333; }
            .search-bar, .filter-nav, .path-box, .back-to-top { display: none; }
            .course-card {
                background: white;
                border: 1px solid #ccc;
                break-inside: avoid;
                color: #222;
            }
            .course-card .title { color: #111; }
            .course-card .desc { color: #555; }
            .section-title { color: #333; border-bottom-color: #333; }
            footer { color: #666; border-top-color: #ccc; }
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Synthesis Course Collection",
      "description": "Evidence Synthesis and Meta-Analysis Training Materials",
      "numberOfItems": 26
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Minor #1: Sentinel element for IntersectionObserver (back-to-top button visibility) -->
    <div id="scroll-sentinel" aria-hidden="true" style="position:absolute;top:400px;height:1px;width:1px;pointer-events:none;"></div>
    <header>
        <!-- Language Selector -->
        <nav class="lang-selector" aria-label="Select language">
            <span class="lang-current" title="English (current)" aria-current="page">EN</span>
            <a href="index-ar.html" lang="ar" hreflang="ar" title="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©">AR</a>
            <a href="index-de.html" lang="de" hreflang="de" title="Deutsch">DE</a>
            <a href="index-es.html" lang="es" hreflang="es" title="EspaÃ±ol">ES</a>
            <a href="index-fr.html" lang="fr" hreflang="fr" title="FranÃ§ais">FR</a>
            <a href="index-hi.html" lang="hi" hreflang="hi" title="à¤¹à¤¿à¤¨à¥à¤¦à¥€">HI</a>
            <a href="index-it.html" lang="it" hreflang="it" title="Italiano">IT</a>
            <a href="index-ja.html" lang="ja" hreflang="ja" title="æ—¥æœ¬èªž">JA</a>
            <a href="index-ko.html" lang="ko" hreflang="ko" title="í•œêµ­ì–´">KO</a>
            <a href="index-pt.html" lang="pt" hreflang="pt" title="PortuguÃªs">PT</a>
            <a href="index-ru.html" lang="ru" hreflang="ru" title="Ð ÑƒÑÑÐºÐ¸Ð¹">RU</a>
            <a href="index-zh.html" lang="zh" hreflang="zh" title="ä¸­æ–‡">ZH</a>
        </nav>
        <h1>Synthesis Course Collection</h1>
        <p>Evidence Synthesis & Meta-Analysis Training Materials</p>
        <div class="stats">
            <!-- Nit #11: aria-busy="true" initially, removed when JS populates count -->
            <div class="stat">
                <div class="stat-number" id="stat-courses" aria-busy="true">&hellip;</div>
                <div class="stat-label" id="stat-courses-label">Courses</div>
            </div>
            <div class="stat">
                <div class="stat-number">5</div>
                <div class="stat-label">Categories</div>
            </div>
        </div>
        <form role="search" aria-label="Search courses" class="search-bar" onsubmit="return false;">
            <label for="search" class="sr-only">Search courses</label>
            <!-- Fix #19: Remove redundant aria-label, keep label[for] association -->
            <input type="search" id="search" placeholder="Search courses..." autocomplete="off">
            <button type="button" class="search-clear hidden" id="searchClear" aria-label="Clear search">&times;</button>
            <span class="search-hint" id="searchHint" aria-hidden="true">/</span>
        </form>
    </header>

    <!-- Fix #2: Wrap filter nav and learning path inside main landmark -->
    <main id="main-content">
        <noscript><p style="text-align:center;padding:2rem;color:#FAF8F5;">JavaScript is required for search and filtering. All course links below remain accessible.</p></noscript>
        <!-- Fix #14: Remove redundant role="button" on native <button> elements -->
        <span class="sr-only" id="toolbar-help">Use arrow keys to navigate filters, Enter or Space to select</span>
        <nav class="filter-nav" role="toolbar" aria-label="Filter courses by category" aria-describedby="toolbar-help">
            <button class="filter-tab" aria-pressed="true" tabindex="0" data-cat="all">All</button>
            <button class="filter-tab" aria-pressed="false" tabindex="-1" data-cat="core">Core</button>
            <button class="filter-tab" aria-pressed="false" tabindex="-1" data-cat="methods">Methods</button>
            <button class="filter-tab" aria-pressed="false" tabindex="-1" data-cat="specialty">Specialty</button>
            <button class="filter-tab" aria-pressed="false" tabindex="-1" data-cat="applied">Applied</button>
            <button class="filter-tab" aria-pressed="false" tabindex="-1" data-cat="meta">Meta / Planning</button>
        </nav>

        <div aria-live="polite" aria-atomic="true" class="sr-only" id="results-announce"></div>

        <section class="learning-path" id="learningPath">
            <div class="path-box">
                <h2 class="path-title" id="learning-path-title">Suggested Learning Path</h2>
                <!-- Nit #14: Learning path note showing subset count -->
                <p class="path-note" style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">5 of 26 courses</p>
                <nav aria-label="Suggested learning path">
                    <div class="path-steps">
                        <a href="meta-analysis-topic-selection-course.html" class="path-step">1. Topic Selection</a>
                        <span class="path-arrow" aria-hidden="true">&rarr;</span>
                        <a href="meta-analysis-methods-course.html" class="path-step">2. Methods</a>
                        <span class="path-arrow" aria-hidden="true">&rarr;</span>
                        <a href="risk-of-bias-mastery-course.html" class="path-step">3. Risk of Bias</a>
                        <span class="path-arrow" aria-hidden="true">&rarr;</span>
                        <a href="grade-certainty-course.html" class="path-step">4. GRADE</a>
                        <span class="path-arrow" aria-hidden="true">&rarr;</span>
                        <a href="meta-analysis-writing-course.html" class="path-step">5. Writing</a>
                    </div>
                </nav>
            </div>
        </section>

        <!-- Fix #22: Skip-link target at the course grid area -->
        <div id="course-grid-start"></div>

        <!-- Core Courses -->
        <h2 class="section-title" id="section-core" data-cat="core">Core Courses</h2>
        <!-- Nit #12: aria-labelledby pointing to section title h2 -->
        <div class="course-grid" data-cat="core" aria-labelledby="section-core">
            <!-- Fix #1: Change span.title to h3.title inside each card -->
            <a href="synthesis-course.html" class="course-card" data-cat="core" aria-labelledby="card-synthesis">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-synthesis">Evidence Reversal: A Meta-Analysis Course</h3>
                <span class="desc">The flagship course. Covers the full meta-analysis journey through storytelling, interactive tools, and spaced repetition.</span>
                <span class="meta">15 modules &middot; Interactive &middot; Gamified</span>
            </a>
            <a href="meta-analysis-methods-course.html" class="course-card" data-cat="core" aria-labelledby="card-methods">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-methods">Meta-Analysis Methods: From Question to Conclusion</h3>
                <span class="desc">Comprehensive methods course covering effect sizes, heterogeneity, forest plots, and statistical pooling.</span>
                <span class="meta">8 modules &middot; Interactive charts &middot; Gamified</span>
            </a>
            <a href="meta-analysis-topic-selection-course.html" class="course-card" data-cat="core" aria-labelledby="card-topic-selection">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-topic-selection">Meta-Analysis Topic Selection: The Right Question</h3>
                <span class="desc">Learn to formulate answerable research questions and identify gaps in the evidence landscape.</span>
                <span class="meta">8 modules &middot; Decision scenarios</span>
            </a>
            <a href="meta-analysis-writing-course.html" class="course-card" data-cat="core" aria-labelledby="card-writing">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-writing">The Covenant of Evidence: Writing the Meta-Analysis Paper</h3>
                <span class="desc">From protocol to publication: structuring, writing, and presenting your systematic review.</span>
                <span class="meta">6 modules &middot; Writing exercises</span>
            </a>
            <a href="grade-certainty-course.html" class="course-card" data-cat="core" aria-labelledby="card-grade">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-grade">GRADE: The Art of Judging Evidence</h3>
                <span class="desc">Master the GRADE framework for rating certainty of evidence, including all five downgrading and three upgrading factors.</span>
                <span class="meta">10 modules &middot; Gamified &middot; Case studies</span>
            </a>
            <a href="risk-of-bias-mastery-course.html" class="course-card" data-cat="core" aria-labelledby="card-rob">
                <div class="card-top"><span class="tag tag-core">Core</span></div>
                <h3 class="title" id="card-rob">Risk of Bias Mastery: The Hidden Threats</h3>
                <span class="desc">Deep dive into RoB domains: allocation, blinding, attrition, selective reporting, and confounding.</span>
                <span class="meta">7 modules &middot; Gamified</span>
            </a>
        </div>

        <!-- Methods & Techniques -->
        <h2 class="section-title" id="section-methods" data-cat="methods">Methods & Techniques</h2>
        <div class="course-grid" data-cat="methods" aria-labelledby="section-methods">
            <a href="advanced-meta-analysis-course.html" class="course-card" data-cat="methods" aria-labelledby="card-advanced">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-advanced">Advanced Meta-Analysis: Beyond the Basics</h3>
                <span class="desc">Network meta-analysis, Bayesian methods, MASEM, dose-response modeling, and interactive Plotly visualizations.</span>
                <span class="meta">9 modules &middot; Plotly charts &middot; Glossary</span>
            </a>
            <a href="ipd-meta-analysis-course.html" class="course-card" data-cat="methods" aria-labelledby="card-ipd">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-ipd">The Hidden Patient: Individual Participant Data Meta-Analysis</h3>
                <span class="desc">IPD methods for accessing patient-level data, one-stage and two-stage models, and data sharing frameworks.</span>
                <span class="meta">10 modules &middot; Interactive</span>
            </a>
            <a href="publication-bias-detective.html" class="course-card" data-cat="methods" aria-labelledby="card-pub-bias">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-pub-bias">Publication Bias Detective: The Evidence That Never Saw Light</h3>
                <span class="desc">Investigate missing evidence with interactive funnel plots, trim-and-fill, p-curves, and selection models.</span>
                <span class="meta">7 modules &middot; Plotly charts &middot; Detective theme</span>
            </a>
            <a href="dta-course-when-the-test-lies-v4.html" class="course-card" data-cat="methods" aria-labelledby="card-dta-v4">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-dta-v4">When The Test Lies: Diagnostic Test Accuracy (Latest)</h3>
                <span class="desc">Sensitivity, specificity, ROC curves, HSROC models, and 2x2 table exercises for DTA meta-analysis.</span>
                <span class="meta">20 modules &middot; Interactive sliders</span>
            </a>
            <a href="observational-evidence-course.html" class="course-card" data-cat="methods" aria-labelledby="card-observational">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-observational">Observational Evidence: When RCTs Are Impossible</h3>
                <span class="desc">Methods for synthesizing observational studies, handling confounding, and applying ROBINS-I.</span>
                <span class="meta">6 modules &middot; Gamified</span>
            </a>
            <a href="qualitative-evidence-synthesis-course.html" class="course-card" data-cat="methods" aria-labelledby="card-qualitative">
                <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                <h3 class="title" id="card-qualitative">Qualitative Evidence Synthesis: Understanding the Why</h3>
                <span class="desc">GRADE-CERQual, thematic synthesis, meta-ethnography, and integrating qualitative with quantitative evidence.</span>
                <span class="meta">10 modules &middot; Gamified &middot; 18 badges</span>
            </a>
        </div>

        <!-- Specialty Reviews -->
        <h2 class="section-title" id="section-specialty" data-cat="specialty">Specialty Reviews</h2>
        <div class="course-grid" data-cat="specialty" aria-labelledby="section-specialty">
            <a href="umbrella-reviews-course.html" class="course-card" data-cat="specialty" aria-labelledby="card-umbrella">
                <div class="card-top"><span class="tag tag-specialty">Specialty</span></div>
                <h3 class="title" id="card-umbrella">Umbrella Reviews: The Review of Reviews</h3>
                <span class="desc">Overview methodology for synthesizing multiple systematic reviews on related questions.</span>
                <span class="meta">7 modules &middot; Gamified &middot; 12 badges</span>
            </a>
            <a href="living-reviews-course.html" class="course-card" data-cat="specialty" aria-labelledby="card-living">
                <div class="card-top"><span class="tag tag-specialty">Specialty</span></div>
                <h3 class="title" id="card-living">Living Reviews: Future of the Field</h3>
                <span class="desc">Continuous evidence surveillance, update triggers, sustainability planning, and COVID-era lessons.</span>
                <span class="meta">7 modules &middot; Gamified &middot; Decision trees</span>
            </a>
            <a href="rapid-reviews-course.html" class="course-card" data-cat="specialty" aria-labelledby="card-rapid">
                <div class="card-top"><span class="tag tag-specialty">Specialty</span></div>
                <h3 class="title" id="card-rapid">Rapid Reviews & Evidence Synthesis in Crisis</h3>
                <span class="desc">Streamlined methods for producing trustworthy evidence under time pressure: 40 hours, not 40 days.</span>
                <span class="meta">7 modules &middot; Branching scenarios</span>
            </a>
            <a href="prognostic-reviews-course.html" class="course-card" data-cat="specialty" aria-labelledby="card-prognostic">
                <div class="card-top"><span class="tag tag-specialty">Specialty</span></div>
                <h3 class="title" id="card-prognostic">Prognostic Reviews: Predicting Patient Futures</h3>
                <span class="desc">Synthesizing prognostic factor and prediction model studies, including PROBAST and CHARMS.</span>
                <span class="meta">5 modules &middot; Gamified</span>
            </a>
        </div>

        <!-- Applied / Regional -->
        <h2 class="section-title" id="section-applied" data-cat="applied">Applied & Regional</h2>
        <div class="course-grid" data-cat="applied" aria-labelledby="section-applied">
            <a href="hta-oman-course.html" class="course-card" data-cat="applied" aria-labelledby="card-hta">
                <div class="card-top"><span class="tag tag-applied">Applied</span></div>
                <h3 class="title" id="card-hta">Health Technology Assessment: The Oman Journey</h3>
                <span class="desc">ICER, QALY, budget impact, and cost-effectiveness analysis contextualized for GCC health systems.</span>
                <span class="meta">11 modules &middot; Health economics</span>
            </a>
            <a href="truthcert-course.html" class="course-card" data-cat="applied" aria-labelledby="card-truthcert">
                <div class="card-top"><span class="tag tag-applied">Applied</span></div>
                <h3 class="title" id="card-truthcert">TruthCert Africa: When Numbers Speak Truth</h3>
                <span class="desc">Evidence certification, provenance verification, and trust chains for African health data systems.</span>
                <span class="meta">15 modules &middot; Africa-focused</span>
            </a>
            <a href="truthcert-course-fr.html" class="course-card" data-cat="applied" aria-labelledby="card-truthcert-fr">
                <div class="card-top"><span class="tag tag-applied">Applied</span> <span class="lang-badge">FR</span></div>
                <h3 class="title" id="card-truthcert-fr"><span lang="fr">TruthCert Afrique : Quand les Chiffres Disent la V&eacute;rit&eacute;</span></h3>
                <span class="desc"><span lang="fr">Version fran&ccedil;aise du cours TruthCert pour les syst&egrave;mes de sant&eacute; africains francophones.</span></span>
                <span class="meta">15 modules &middot; Afrique francophone</span>
            </a>
            <a href="cast-when-certainty-kills.html" class="course-card" data-cat="applied" aria-labelledby="card-cast">
                <div class="card-top"><span class="tag tag-applied">Applied</span></div>
                <h3 class="title" id="card-cast">When Certainty Kills: The CAST Story</h3>
                <span class="desc">A cautionary case study on how overconfident evidence interpretation led to patient harm.</span>
                <span class="meta">Presentation &middot; Case study</span>
            </a>
        </div>

        <!-- Meta / Planning / Career -->
        <h2 class="section-title" id="section-meta" data-cat="meta">Meta, Planning & Career</h2>
        <div class="course-grid" data-cat="meta" aria-labelledby="section-meta">
            <a href="ai-meta-analysis-course.html" class="course-card" data-cat="meta" aria-labelledby="card-ai">
                <div class="card-top"><span class="tag tag-meta">Meta</span></div>
                <h3 class="title" id="card-ai">The Silicon Scribe: AI in Meta-Analysis</h3>
                <span class="desc">ASReview, validated prompt libraries, AI-assisted screening, and a consumer's guide for reading AI reviews.</span>
                <span class="meta">15 modules &middot; AI tools coverage</span>
            </a>
            <a href="meta-sprint-course.html" class="course-card" data-cat="meta" aria-labelledby="card-sprint">
                <div class="card-top"><span class="tag tag-meta">Meta</span></div>
                <h3 class="title" id="card-sprint">META-SPRINT: 40 Days to Trustworthy Evidence</h3>
                <span class="desc">A structured 5-phase sprint methodology with gates, CondGO emergency framework, and the Colchicine case.</span>
                <span class="meta">9 modules &middot; Gamified &middot; Workflow</span>
            </a>
            <a href="becoming-methodologist.html" class="course-card" data-cat="meta" aria-labelledby="card-methodologist">
                <div class="card-top"><span class="tag tag-meta">Meta</span></div>
                <h3 class="title" id="card-methodologist">Becoming a Methodologist: The Path Less Traveled</h3>
                <span class="desc">Career guidance for aspiring methodologists: skills, portfolios, niches, and practitioner stories.</span>
                <span class="meta">9 modules &middot; Career-focused</span>
            </a>
        </div>

        <!-- No results message - Fix #11: Better empty state with suggestions -->
        <div class="no-results hidden" id="no-results">
            <div id="no-results-msg">No courses match your search.</div>
            <div class="suggestions">Try:
                <button type="button" class="suggestion-pill" data-term="meta-analysis">meta-analysis</button>
                <button type="button" class="suggestion-pill" data-term="GRADE">GRADE</button>
                <button type="button" class="suggestion-pill" data-term="diagnostic">diagnostic</button>
                <button type="button" class="suggestion-pill" data-term="bias">bias</button>
                <button type="button" class="suggestion-pill" data-term="writing">writing</button>
            </div>
            <button type="button" class="suggestion-clear" id="noResultsClear">Clear search</button>
        </div>

        <!-- Earlier DTA Versions (collapsed) - Fix #18: Add item count to summary -->
        <!-- Nit #15: Archive count is recalculated on init in JS to ensure accuracy -->
        <details class="archive-section" id="archive-section" data-cat="methods">
            <!-- Minor #4: Archive summary heading - wrap text in element with heading semantics -->
            <summary id="archive-summary"><h2 style="display: inline; font-family: inherit; font-size: inherit; font-weight: inherit; margin: 0;">Earlier DTA Course Versions (v1 &ndash; v3) (<span id="archive-count">3</span> courses)</h2></summary>
            <div class="course-grid" data-cat="methods" style="margin-top: 1rem;">
                <a href="dta-course-when-the-test-lies.html" class="course-card" data-cat="methods" aria-labelledby="card-dta-v1">
                    <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                    <h3 class="title" id="card-dta-v1">When The Test Lies: DTA Course (v1)</h3>
                    <span class="desc">Original DTA course covering diagnostic accuracy fundamentals.</span>
                    <span class="meta">6 modules &middot; Archived version</span>
                </a>
                <a href="dta-course-when-the-test-lies-v2.html" class="course-card" data-cat="methods" aria-labelledby="card-dta-v2">
                    <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                    <h3 class="title" id="card-dta-v2">When The Test Lies: DTA Course Enhanced (v2)</h3>
                    <span class="desc">Enhanced version with branching scenarios and improved content.</span>
                    <span class="meta">6 modules &middot; Archived version</span>
                </a>
                <a href="dta-course-when-the-test-lies-v3.html" class="course-card" data-cat="methods" aria-labelledby="card-dta-v3">
                    <div class="card-top"><span class="tag tag-methods">Methods</span></div>
                    <h3 class="title" id="card-dta-v3">When The Test Lies: DTA Course (v3)</h3>
                    <span class="desc">Further refined with more interactive elements and accessibility improvements.</span>
                    <span class="meta">6 modules &middot; Archived version</span>
                </a>
            </div>
        </details>
    </main>

    <footer>
        <p>Synthesis Course Collection &copy; 2026 &mdash; 26 interactive courses for evidence-based medicine</p>
        <button class="back-to-top" aria-label="Back to top">&uarr;</button>
    </footer>

    <script>
        const searchInput = document.getElementById('search');
        const searchClear = document.getElementById('searchClear');
        const searchHint = document.getElementById('searchHint');
        const cards = document.querySelectorAll('.course-card');
        const sections = document.querySelectorAll('.section-title');
        const grids = document.querySelectorAll('.course-grid');
        const tabs = document.querySelectorAll('.filter-tab');
        const noResults = document.getElementById('no-results');
        const archiveSection = document.getElementById('archive-section');
        const learningPath = document.getElementById('learningPath');
        const statEl = document.getElementById('stat-courses');
        const statLabel = document.getElementById('stat-courses-label');
        const backToTop = document.querySelector('.back-to-top');

        let activeCategory = 'all';

        // Track per-card hide timeouts for two-phase animation
        const cardGoneTimers = new WeakMap();

        // Minor #3: Cache grid->cards relationship at initialization to avoid DOM queries in renderCards loop
        const gridCardsMap = new Map();
        grids.forEach(grid => {
            gridCardsMap.set(grid, Array.from(grid.querySelectorAll('.course-card')));
        });

        // Nit #16: Compute total main (non-archive) course count once
        // Uses child combinator (main > .course-grid) to exclude grids inside details/archive
        const mainGrids = document.querySelectorAll('main > .course-grid');
        let totalMain = 0;
        mainGrids.forEach(g => { totalMain += g.querySelectorAll('.course-card').length; });
        // Populate stat immediately (replaces loading placeholder)
        statEl.textContent = totalMain;
        // Nit #11: Remove aria-busy now that count is populated
        statEl.removeAttribute('aria-busy');
        statLabel.textContent = 'Courses';

        // Nit #15: Dynamic archive count - recalculated here on init to ensure accuracy
        const archiveCountEl = document.getElementById('archive-count');
        const archiveCards = archiveSection.querySelectorAll('.course-card');
        archiveCountEl.textContent = archiveCards.length;

        // Minor #7: Compute category counts and update tab labels
        const categoryCounts = { all: totalMain };
        cards.forEach(card => {
            // Only count non-archive cards
            if (!card.closest('details')) {
                const cat = card.dataset.cat;
                categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;
            }
        });
        tabs.forEach(tab => {
            const cat = tab.dataset.cat;
            const count = categoryCounts[cat] || 0;
            const baseText = tab.textContent.replace(/\s*\(\d+\)$/, '');
            tab.textContent = baseText + ' (' + count + ')';
        });

        // Debounced screen reader announcements
        let announceTimer;
        function announceResults(text) {
            clearTimeout(announceTimer);
            announceTimer = setTimeout(() => {
                document.getElementById('results-announce').textContent = text;
            }, 300);
        }

        // Accent-insensitive normalization helper
        function stripAccents(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        }

        // Minor #6: Helper to highlight search matches in card text (XSS-safe using DOM manipulation)
        function highlightMatches(card, searchTerm) {
            const titleEl = card.querySelector('.title');
            const descEl = card.querySelector('.desc');

            // Store original innerHTML if not already stored (preserves lang="fr" spans etc.)
            if (!card.dataset.origTitleHtml) {
                card.dataset.origTitleHtml = titleEl.innerHTML;
                card.dataset.origDescHtml = descEl.innerHTML;
                card.dataset.origTitle = titleEl.textContent;
                card.dataset.origDesc = descEl.textContent;
            }

            if (!searchTerm) {
                // Restore original HTML (preserves inner <span lang="fr"> elements)
                titleEl.innerHTML = card.dataset.origTitleHtml;
                descEl.innerHTML = card.dataset.origDescHtml;
                return;
            }

            // Create case-insensitive regex for highlighting
            const escapedTerm = searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(escapedTerm, 'gi');

            // XSS-safe highlighting using DOM manipulation instead of innerHTML
            function highlightText(element, originalText) {
                const fragment = document.createDocumentFragment();
                let lastIndex = 0;
                let match;

                // Reset regex lastIndex for global search
                regex.lastIndex = 0;

                while ((match = regex.exec(originalText)) !== null) {
                    // Add text before the match
                    if (match.index > lastIndex) {
                        fragment.appendChild(document.createTextNode(originalText.slice(lastIndex, match.index)));
                    }
                    // Add the highlighted match
                    const mark = document.createElement('mark');
                    mark.appendChild(document.createTextNode(match[0]));
                    fragment.appendChild(mark);
                    lastIndex = regex.lastIndex;
                }

                // Add remaining text after last match
                if (lastIndex < originalText.length) {
                    fragment.appendChild(document.createTextNode(originalText.slice(lastIndex)));
                }

                // Replace element content with fragment
                element.textContent = '';
                element.appendChild(fragment);
            }

            highlightText(titleEl, card.dataset.origTitle);
            highlightText(descEl, card.dataset.origDesc);
        }

        function renderCards() {
            const q = stripAccents(searchInput.value.toLowerCase().trim());
            const rawQ = searchInput.value.trim(); // For highlighting (preserve case)
            let visibleCount = 0;

            // Show/hide search clear button
            searchClear.classList.toggle('hidden', !searchInput.value);

            // Toggle search hint visibility based on input value
            searchHint.classList.toggle('hidden', !!searchInput.value);

            // Hide learning path when filtering by non-all category
            learningPath.classList.toggle('hidden', activeCategory !== 'all');

            // Filter cards by both category AND search
            cards.forEach(card => {
                const cat = card.dataset.cat;
                const text = stripAccents(card.textContent.toLowerCase());
                const matchesCat = activeCategory === 'all' || cat === activeCategory;
                const matchesSearch = !q || text.includes(q);
                const show = matchesCat && matchesSearch;

                // Minor #6: Apply/remove search highlighting
                highlightMatches(card, show ? rawQ : '');

                // Two-phase card animation
                if (!show && !card.classList.contains('card-hidden')) {
                    // HIDING: phase 1 â€” fade out (opacity 0)
                    clearTimeout(cardGoneTimers.get(card));
                    card.classList.add('card-hidden');
                    // phase 2 â€” after fade completes, remove from layout
                    cardGoneTimers.set(card, setTimeout(() => {
                        card.classList.add('card-gone');
                    }, 300));
                } else if (show && (card.classList.contains('card-hidden') || card.classList.contains('card-gone'))) {
                    // SHOWING: remove from layout collapse first, then fade in
                    clearTimeout(cardGoneTimers.get(card));
                    card.classList.remove('card-gone');
                    card.classList.remove('card-hidden');
                }

                // Only count cards NOT inside a details element
                if (show && !card.closest('details')) visibleCount++;
            });

            // Show/hide section titles and grids (Minor #3: use cached gridCardsMap)
            grids.forEach(grid => {
                const gridCat = grid.dataset.cat;
                const cachedCards = gridCardsMap.get(grid) || [];
                const visibleCards = cachedCards.filter(c => !c.classList.contains('card-hidden'));
                const isEmpty = visibleCards.length === 0;
                grid.classList.toggle('hidden', isEmpty);

                const sectionId = 'section-' + gridCat;
                const sectionTitle = document.getElementById(sectionId);
                if (sectionTitle) {
                    sectionTitle.classList.toggle('hidden', isEmpty);
                }
            });

            // Handle archive section visibility
            const archiveCat = archiveSection.dataset.cat;
            const archiveMatchesCat = activeCategory === 'all' || archiveCat === activeCategory;
            const archiveGrid = archiveSection.querySelector('.course-grid');
            const archiveVisible = archiveGrid ? archiveGrid.querySelectorAll('.course-card:not(.card-hidden)').length : 0;
            archiveSection.classList.toggle('hidden', !archiveMatchesCat || archiveVisible === 0);

            // No results message (context-aware)
            noResults.classList.toggle('hidden', visibleCount > 0);
            // Minor #5: Track the rich no-results message for screen reader announcement
            let noResultsRichMsg = '';
            if (visibleCount === 0) {
                const catLabels = { all: '', core: 'Core', methods: 'Methods', specialty: 'Specialty', applied: 'Applied', meta: 'Meta / Planning' };
                const catName = catLabels[activeCategory] || '';
                const msgEl = document.getElementById('no-results-msg');
                if (q && catName) {
                    noResultsRichMsg = 'No ' + catName + " courses match \u2018" + searchInput.value.trim() + "\u2019.";
                } else if (q) {
                    noResultsRichMsg = "No courses match \u2018" + searchInput.value.trim() + "\u2019.";
                } else if (catName) {
                    noResultsRichMsg = 'No ' + catName + ' courses found.';
                } else {
                    noResultsRichMsg = 'No courses match your search.';
                }
                msgEl.textContent = noResultsRichMsg;
            }

            // Dynamic stats: show "X of Y" when filtering, just "Y" when showing all
            const isFiltering = q || activeCategory !== 'all';
            if (isFiltering) {
                statEl.textContent = visibleCount + ' of ' + totalMain;
                statLabel.textContent = 'Courses';
            } else {
                statEl.textContent = totalMain;
                statLabel.textContent = 'Courses';
            }

            // Announce to screen readers (debounced)
            // Minor #5: Announce the full context-aware message when no results
            if (visibleCount === 0 && noResultsRichMsg) {
                announceResults(noResultsRichMsg + ' Try a different search term.');
            } else if (isFiltering) {
                announceResults(visibleCount + ' course' + (visibleCount !== 1 ? 's' : '') + ' found');
            } else {
                announceResults('');
            }

            // Update URL hash state
            updateURLState();
        }

        // Debounce wrapper for search DOM updates (150ms)
        let renderDebounceTimer;
        function debouncedRender() {
            clearTimeout(renderDebounceTimer);
            renderDebounceTimer = setTimeout(renderCards, 150);
        }

        // Search handler
        searchInput.addEventListener('input', debouncedRender);

        // Search clear button handler
        searchClear.addEventListener('click', () => {
            searchInput.value = '';
            searchClear.classList.add('hidden');
            searchHint.classList.remove('hidden');
            renderCards();
            searchInput.focus();
        });

        // Suggestion pill click handlers (Fix #4: clickable empty-state suggestions)
        document.querySelectorAll('.suggestion-pill').forEach(pill => {
            pill.addEventListener('click', () => {
                searchInput.value = pill.dataset.term;
                searchClear.classList.remove('hidden');
                searchHint.classList.add('hidden');
                renderCards();
                searchInput.focus();
            });
        });

        // No-results clear button handler (Fix #8)
        document.getElementById('noResultsClear').addEventListener('click', () => {
            searchInput.value = '';
            searchClear.classList.add('hidden');
            searchHint.classList.remove('hidden');
            activeCategory = 'all';
            tabs.forEach(t => {
                t.setAttribute('aria-pressed', 'false');
                t.setAttribute('tabindex', '-1');
            });
            tabs[0].setAttribute('aria-pressed', 'true');
            tabs[0].setAttribute('tabindex', '0');
            renderCards();
            searchInput.focus();
        });

        // Escape key handler for search
        searchInput.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                searchInput.value = '';
                searchClear.classList.add('hidden');
                searchHint.classList.remove('hidden');
                activeCategory = 'all';
                tabs.forEach(t => {
                    t.setAttribute('aria-pressed', 'false');
                    t.setAttribute('tabindex', '-1');
                });
                tabs[0].setAttribute('aria-pressed', 'true');
                tabs[0].setAttribute('tabindex', '0');
                renderCards();
                searchInput.focus();
                announceResults('Search cleared, showing all courses');
            }
        });

        // Category filter handler
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => {
                    t.setAttribute('aria-pressed', 'false');
                    t.setAttribute('tabindex', '-1');
                });
                tab.setAttribute('aria-pressed', 'true');
                tab.setAttribute('tabindex', '0');
                activeCategory = tab.dataset.cat;
                renderCards();
            });
        });

        // Arrow key navigation for toolbar buttons
        const toolbar = document.querySelector('[role="toolbar"]');
        toolbar.addEventListener('keydown', e => {
            const tabsArr = Array.from(tabs);
            const idx = tabsArr.indexOf(document.activeElement);
            if (idx === -1) return;
            let next = -1;
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                next = (idx + 1) % tabsArr.length;
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                next = (idx - 1 + tabsArr.length) % tabsArr.length;
            } else if (e.key === 'Home') {
                next = 0;
            } else if (e.key === 'End') {
                next = tabsArr.length - 1;
            }
            if (next !== -1) {
                e.preventDefault();
                tabsArr.forEach(t => t.setAttribute('tabindex', '-1'));
                tabsArr[next].setAttribute('tabindex', '0');
                tabsArr[next].focus();
                tabsArr[next].click();
            }
        });

        // "/" shortcut to focus search
        document.addEventListener('keydown', e => {
            if (e.key === '/' && document.activeElement !== searchInput
                && document.activeElement.tagName !== 'INPUT'
                && document.activeElement.tagName !== 'TEXTAREA') {
                e.preventDefault();
                searchInput.focus();
            }
        });

        // Minor #1: Back to top button using IntersectionObserver (more performant than scroll events)
        const scrollSentinel = document.getElementById('scroll-sentinel');
        const backToTopObserver = new IntersectionObserver((entries) => {
            // When sentinel is NOT intersecting (scrolled past it), show the button
            entries.forEach(entry => {
                backToTop.classList.toggle('visible', !entry.isIntersecting);
            });
        }, { threshold: 0 });
        backToTopObserver.observe(scrollSentinel);

        backToTop.addEventListener('click', () => {
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            window.scrollTo({ top: 0, behavior: prefersReducedMotion ? 'auto' : 'smooth' });
        });

        // URL state management
        function updateURLState() {
            const params = [];
            if (activeCategory !== 'all') {
                params.push('category=' + encodeURIComponent(activeCategory));
            }
            const q = searchInput.value.trim();
            if (q) {
                params.push('q=' + encodeURIComponent(q));
            }
            const hash = params.length > 0 ? '#' + params.join('&') : '';
            if (window.location.hash !== hash) {
                history.replaceState(null, '', hash || window.location.pathname + window.location.search);
            }
        }

        function restoreFromURL() {
            const hash = window.location.hash.replace(/^#/, '');
            if (!hash) {
                activeCategory = 'all';
                searchInput.value = '';
                tabs.forEach(t => {
                    t.setAttribute('aria-pressed', 'false');
                    t.setAttribute('tabindex', '-1');
                });
                tabs[0].setAttribute('aria-pressed', 'true');
                tabs[0].setAttribute('tabindex', '0');
                renderCards();
                return;
            }
            const params = {};
            hash.split('&').forEach(pair => {
                const eqIdx = pair.indexOf('=');
                if (eqIdx === -1) return;
                const key = decodeURIComponent(pair.slice(0, eqIdx));
                const val = decodeURIComponent(pair.slice(eqIdx + 1));
                if (key) {
                    params[key] = val;
                }
            });
            if (params.category) {
                const validCats = Array.from(tabs).map(t => t.dataset.cat);
                if (validCats.includes(params.category)) {
                    activeCategory = params.category;
                    tabs.forEach(t => {
                        const isActive = t.dataset.cat === activeCategory;
                        t.setAttribute('aria-pressed', isActive ? 'true' : 'false');
                        t.setAttribute('tabindex', isActive ? '0' : '-1');
                    });
                }
            }
            if (params.q) {
                searchInput.value = params.q;
            }
            renderCards();
        }

        // Restore state from URL on load
        restoreFromURL();

        // Listen for hash changes (browser back/forward)
        window.addEventListener('hashchange', restoreFromURL);

        // Minor #2: Clean up timers on page unload to prevent theoretical memory leaks
        window.addEventListener('beforeunload', () => {
            clearTimeout(announceTimer);
            clearTimeout(renderDebounceTimer);
        });
    </script>
</body>
</html>
