<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Le patient cach√©¬†: un cours sur la m√©ta-analyse des donn√©es des participants individuels</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,600&amp;family=Source+Sans+Pro:wght@300;400;600;700&amp;display=swap" rel="stylesheet"/>
<style>
    /* Fallback fonts for offline use */
    @font-face {
      font-family: 'Cormorant Garamond';
      src: local('Cormorant Garamond'), local('Georgia'), local('Times New Roman');
      font-display: swap;
    }
    @font-face {
      font-family: 'Source Sans Pro';
      src: local('Source Sans Pro'), local('Segoe UI'), local('Arial');
      font-display: swap;
    }

    :root {
      --navy: #1E2761;
      --deep-navy: #141B3D;
      --gold: #D4AF37;
      --cream: #FAF8F5;
      --light-cream: #FFFFFF;
      --text: #2D3748;
      --light-text: #718096;
      --red: #C53030;
      --green: #22c55e;
      --teal: #00D4AA;
      --purple: #A855F7;
      --orange: #F97316;
      --blue: #3B82F6;
      --blood-red: #8B0000;
      --transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* Accessibility: Skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--gold);
      color: var(--navy);
      padding: 8px 16px;
      z-index: 1000;
      font-weight: 600;
      text-decoration: none;
      border-radius: 0 0 4px 0;
    }
    .skip-link:focus {
      top: 0;
    }

    /* Accessibility: Focus indicators */
    *:focus {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }
    *:focus:not(:focus-visible) {
      outline: none;
    }
    *:focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
    }

    /* Accessibility: Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
      .slide { transition: none; }
    }

    /* Accessibility: Screen reader only */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Accessibility: Live region for announcements */
    .aria-live-region {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    html, body {
      height: 100%;
      font-family: 'Source Sans Pro', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--deep-navy);
      color: var(--cream);
    }

    .course-container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 300px;
      background: linear-gradient(180deg, var(--deep-navy) 0%, #0a0f1a 100%);
      border-right: 1px solid rgba(212,175,55,0.2);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }

    /* mobile sidebar handled by hamburger toggle below */

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(212,175,55,0.2);
    }

    .sidebar-header h1 {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 0.25rem;
    }

    .sidebar-header p {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.6);
    }

    .module-list {
      flex: 1;
      overflow-y: auto;
      padding: 1rem 0;
    }

    .module-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }

    .module-item:hover { background: rgba(212,175,55,0.1); }
    .module-item.active { background: rgba(212,175,55,0.15); border-left-color: var(--gold); }
    .module-item.completed .module-number { background: var(--green); color: white; }

    .module-number {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .module-item.active .module-number { background: var(--gold); color: var(--navy); }

    .module-info { flex: 1; min-width: 0; }
    .module-title { font-size: 0.85rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .module-subtitle { font-size: 0.7rem; color: rgba(255,255,255,0.7); }

    .sidebar-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid rgba(212,175,55,0.2);
      font-size: 0.7rem;
      color: rgba(255,255,255,0.4);
      line-height: 1.4;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-header {
      padding: 1rem 2rem;
      background: rgba(0,0,0,0.3);
      border-bottom: 1px solid rgba(212,175,55,0.2);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .breadcrumb { font-size: 0.85rem; color: rgba(255,255,255,0.6); }
    .breadcrumb span { color: var(--gold); }

    .header-actions { display: flex; gap: 0.5rem; }

    .btn {
      padding: 0.5rem 1rem;
      border: 1px solid rgba(212,175,55,0.3);
      border-radius: 6px;
      background: rgba(255,255,255,0.05);
      color: var(--cream);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover { background: rgba(212,175,55,0.2); border-color: var(--gold); }
    .btn:focus-visible { box-shadow: 0 0 0 3px rgba(212,175,55,0.5); }
    .btn.primary { background: var(--gold); color: var(--navy); border-color: var(--gold); font-weight: 600; }
    .btn.primary:focus-visible { box-shadow: 0 0 0 3px rgba(212,175,55,0.7); }

    .content-body { flex: 1; overflow: hidden; display: flex; }

    /* Slides */
    .slides-container { flex: 1; position: relative; overflow: hidden; }

    .module-slides { display: none; width: 100%; height: 100%; }
    .module-slides.active { display: block; }

    .slide {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 2rem 2rem 4rem 2rem;
      padding-top: 3rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition), visibility var(--transition);
      overflow-y: auto;
      overflow-x: hidden;
    }

    .slide .content { margin-top: auto; margin-bottom: auto; }
    .slide > * { max-width: 100%; word-wrap: break-word; }
    .slide.active { opacity: 1; visibility: visible; }

    .slide.dark { background: var(--deep-navy); color: var(--cream); }
    .slide.light { background: var(--cream); color: var(--text); }
    .slide.black { background: #000; color: var(--cream); }
    .slide.gradient { background: linear-gradient(135deg, var(--deep-navy) 0%, #2a1a4a 100%); color: var(--cream); }
    .slide.blood { background: linear-gradient(135deg, #1a0a0a 0%, #2d1515 100%); color: var(--cream); }
    .slide.hope { background: linear-gradient(135deg, #0a1a0a 0%, #152d15 100%); color: var(--cream); }
    .slide.ipd { background: linear-gradient(135deg, #0a1a2d 0%, #152d3d 100%); color: var(--cream); }
    .slide.precision { background: linear-gradient(135deg, #1a0a2d 0%, #2d153d 100%); color: var(--cream); }

    /* Typography */
    .serif { font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif; }

    .title {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: clamp(1.8rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .title.navy { color: var(--navy); }
    .title.gold { color: var(--gold); }
    .title.cream { color: var(--cream); }
    .title.red { color: var(--red); }
    .title.green { color: var(--green); }
    .title.blue { color: var(--blue); }
    .title.purple { color: var(--purple); }

    .subtitle {
      font-size: clamp(1rem, 2vw, 1.5rem);
      color: var(--light-text);
      margin-bottom: 2rem;
    }

    .slide.dark .subtitle { color: rgba(255,255,255,0.7); }

    .big-number {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: clamp(4rem, 15vw, 10rem);
      font-weight: 700;
      line-height: 1;
    }

    .big-number.navy { color: var(--navy); }
    .big-number.gold { color: var(--gold); }
    .big-number.red { color: var(--red); }
    .big-number.green { color: var(--green); }
    .big-number.blue { color: var(--blue); }

    /* Refrain */
    .refrain {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: clamp(1.4rem, 4vw, 2.5rem);
      font-style: italic;
      color: var(--gold);
      text-align: center;
      max-width: 800px;
      line-height: 1.4;
    }

    .refrain.warning {
      color: var(--red);
      border-left: 4px solid var(--red);
      padding-left: 1.5rem;
      text-align: left;
    }

    .refrain.hope { color: var(--green); }
    .refrain.insight { color: var(--blue); }

    /* Rhetorical */
    .rhetorical {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: clamp(1.2rem, 3vw, 2rem);
      color: rgba(255,255,255,0.9);
      text-align: center;
      max-width: 700px;
      line-height: 1.5;
    }

    .rhetorical em { color: var(--gold); font-style: normal; }

    /* Simple explanation box */
    .simple-box {
      background: linear-gradient(135deg, rgba(0,212,170,0.1), rgba(0,0,0,0.2));
      border: 2px solid var(--teal);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 600px;
      margin: 1rem 0;
    }

    .simple-box.blue {
      background: linear-gradient(135deg, rgba(59,130,246,0.1), rgba(0,0,0,0.2));
      border-color: var(--blue);
    }

    .simple-box.purple {
      background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(0,0,0,0.2));
      border-color: var(--purple);
    }

    .simple-box .simple-title {
      color: var(--teal);
      font-size: 0.75rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
    }

    .simple-box.blue .simple-title { color: var(--blue); }
    .simple-box.purple .simple-title { color: var(--purple); }

    .simple-box .simple-text {
      font-size: 1.1rem;
      line-height: 1.6;
    }

    .simple-box .simple-text strong { color: var(--gold); }

    /* Story card */
    .story-card {
      background: rgba(0,0,0,0.3);
      border-left: 4px solid var(--gold);
      padding: 1.5rem 2rem;
      max-width: 700px;
      margin: 1rem 0;
    }

    .story-card .place {
      font-size: 0.75rem;
      color: var(--gold);
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }

    .story-card .narrative {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.1rem;
      line-height: 1.6;
      color: rgba(255,255,255,0.9);
    }

    .story-card .source {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.5);
      margin-top: 1rem;
      font-style: italic;
    }

    /* Decision Tree */
    .decision-tree {
      background: rgba(0,0,0,0.3);
      border: 2px solid var(--gold);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 800px;
      width: 100%;
    }

    .decision-tree h4 {
      color: var(--gold);
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.1rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    .tree-level {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin: 0.5rem 0;
      position: relative;
      flex-wrap: wrap;
    }

    .tree-node {
      background: var(--navy);
      border: 2px solid var(--gold);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      text-align: center;
      min-width: 120px;
      font-size: 0.8rem;
    }

    .tree-node.root { background: var(--gold); color: var(--navy); font-weight: 700; }
    .tree-node.question { background: rgba(168,85,247,0.3); border-color: var(--purple); }
    .tree-node.yes { background: rgba(34,197,94,0.3); border-color: var(--green); }
    .tree-node.no { background: rgba(197,48,48,0.3); border-color: var(--red); }
    .tree-node.ipd { background: rgba(59,130,246,0.3); border-color: var(--blue); }
    .tree-node.aggregate { background: rgba(249,115,22,0.3); border-color: var(--orange); }
    .tree-node.action { background: var(--teal); color: var(--navy); font-weight: 600; }

    .tree-arrow {
      color: var(--gold);
      font-size: 1.5rem;
      text-align: center;
    }

    .tree-label {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.7);
      text-align: center;
      margin-top: 0.25rem;
    }

    /* Comparison boxes */
    .compare-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      max-width: 800px;
      width: 100%;
    }

    @media (max-width: 600px) { .compare-grid { grid-template-columns: 1fr; } }

    .compare-box {
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      padding: 1.5rem;
      border: 2px solid;
    }

    .compare-box.aggregate { border-color: var(--orange); }
    .compare-box.ipd { border-color: var(--blue); }

    .compare-box h4 {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.1rem;
      margin-bottom: 0.75rem;
    }

    .compare-box.aggregate h4 { color: var(--orange); }
    .compare-box.ipd h4 { color: var(--blue); }

    .compare-box ul {
      list-style: none;
      font-size: 0.85rem;
      line-height: 1.8;
    }

    .compare-box li::before {
      content: "‚Ä¢ ";
      color: var(--gold);
    }

    /* Stats */
    .stats-grid {
      display: flex;
      gap: 1rem;
      margin: 1.5rem 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .stat-box {
      background: var(--navy);
      color: var(--cream);
      padding: 1rem 1.5rem;
      text-align: center;
      min-width: 130px;
      border-radius: 8px;
    }

    .stat-value {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: clamp(1.4rem, 3vw, 2rem);
      font-weight: 700;
    }

    .stat-label { font-size: 0.7rem; opacity: 0.8; margin-top: 0.25rem; }

    /* Death toll */
    .death-toll {
      background: linear-gradient(135deg, rgba(197,48,48,0.3), rgba(0,0,0,0.5));
      border: 2px solid var(--red);
      padding: 2rem;
      text-align: center;
      max-width: 400px;
      border-radius: 12px;
    }

    .death-toll .number {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 4rem;
      font-weight: 700;
      color: var(--red);
    }

    .death-toll .label {
      font-size: 0.9rem;
      color: rgba(255,255,255,0.8);
      margin-top: 0.5rem;
    }

    /* Discovery box */
    .discovery-box {
      background: linear-gradient(135deg, rgba(59,130,246,0.3), rgba(0,0,0,0.5));
      border: 2px solid var(--blue);
      padding: 2rem;
      text-align: center;
      max-width: 450px;
      border-radius: 12px;
    }

    .discovery-box .insight {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--blue);
    }

    .discovery-box .label {
      font-size: 0.9rem;
      color: rgba(255,255,255,0.8);
      margin-top: 0.5rem;
    }

    /* Lesson items */
    .lesson-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin: 0.6rem 0;
      max-width: 800px;
      text-align: left;
    }

    .lesson-number {
      background: var(--gold);
      color: var(--navy);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
      border-radius: 4px;
    }

    .lesson-content h4 {
      font-size: 1rem;
      font-weight: 700;
      color: var(--cream);
      margin-bottom: 0.2rem;
    }

    .lesson-content p { font-size: 0.85rem; color: rgba(255,255,255,0.7); }

    /* Formula box */
    .formula-box {
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--purple);
      border-radius: 8px;
      padding: 1rem 1.5rem;
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.2rem;
      text-align: center;
      max-width: 600px;
      margin: 1rem 0;
    }

    .formula-box .formula {
      color: var(--gold);
      margin: 0.5rem 0;
      font-size: 1.1rem;
    }

    .formula-box .label {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.6);
      font-family: 'Source Sans Pro', sans-serif;
    }

    /* Patient silhouettes */
    .patient-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
      max-width: 400px;
      justify-content: center;
      padding: 1rem;
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
    }

    .patient-icon {
      font-size: 1.2rem;
      opacity: 0.7;
    }

    .patient-icon.highlighted {
      opacity: 1;
      filter: drop-shadow(0 0 4px var(--gold));
    }

    .patient-icon.responder { color: var(--green); }
    .patient-icon.non-responder { color: var(--red); }
    .patient-icon.hidden { color: var(--orange); opacity: 0.4; }

    /* Timeline */
    .timeline {
      max-width: 600px;
      width: 100%;
    }

    .timeline-item {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      padding-left: 1rem;
      border-left: 3px solid var(--gold);
    }

    .timeline-year {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--gold);
      min-width: 60px;
    }

    .timeline-content {
      font-size: 0.9rem;
      color: rgba(255,255,255,0.8);
    }

    /* Gold line */
    .gold-line { width: 150px; height: 2px; background: var(--gold); margin: 1.5rem auto; }

    /* Content wrapper */
    .content {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 1000px;
    }

    /* Animation */
    .slide.active .animate { animation: fadeUp 0.6s ease-out forwards; }
    .slide.active .animate.delay-1 { animation-delay: 0.1s; }
    .slide.active .animate.delay-2 { animation-delay: 0.2s; }
    .slide.active .animate.delay-3 { animation-delay: 0.3s; }
    .slide.active .animate.delay-4 { animation-delay: 0.4s; }
    .slide.active .animate.delay-5 { animation-delay: 0.5s; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate { opacity: 0; }

    /* Slide Nav */
    .slide-nav {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      padding: 1rem 1rem 1.5rem 1rem;
      z-index: 100;
      pointer-events: none;
    }

    .nav-btn {
      background: rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.2);
      color: white;
      font-size: 1.25rem;
      cursor: pointer;
      opacity: 0.6;
      transition: all 0.2s;
      padding: 0.5rem 0.75rem;
      border-radius: 8px;
      pointer-events: auto;
    }

    .nav-btn:hover { opacity: 1; background: rgba(0,0,0,0.7); border-color: var(--gold); }

    .nav-center {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      pointer-events: auto;
    }

    .slide-counter { color: rgba(255,255,255,0.6); font-size: 0.85rem; min-width: 50px; text-align: center; }
    .progress { display: flex; gap: 4px; flex-wrap: wrap; justify-content: center; max-width: 200px; }

    .progress-dot {
      width: 6px; height: 6px;
      border-radius: 50%;
      background: rgba(255,255,255,0.25);
      cursor: pointer;
      transition: all 0.2s;
    }

    .progress-dot.active { background: var(--gold); transform: scale(1.3); }
    .progress-dot:hover { background: rgba(255,255,255,0.6); }

    /* Quiz */
    .quiz-container {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(212,175,55,0.3);
      padding: 1.5rem;
      max-width: 700px;
      width: 100%;
      border-radius: 8px;
    }

    .quiz-question {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--gold);
      line-height: 1.4;
    }

    .quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }

    .quiz-option {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      padding: 0.75rem 1rem;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .quiz-option:hover { background: rgba(212,175,55,0.1); border-color: var(--gold); }
    .quiz-option.correct { background: rgba(34,197,94,0.2); border-color: var(--green); }
    .quiz-option.incorrect { background: rgba(197,48,48,0.2); border-color: var(--red); }

    .quiz-feedback {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      display: none;
      font-size: 0.9rem;
    }

    .quiz-feedback.show { display: block; }
    .quiz-feedback.correct { background: rgba(34,197,94,0.2); border: 1px solid var(--green); }
    .quiz-feedback.incorrect { background: rgba(197,48,48,0.2); border: 1px solid var(--red); }

    /* Branching Scenario */
    .scenario-panel {
      background: rgba(0,0,0,0.3);
      border: 2px solid var(--purple);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 750px;
      width: 100%;
    }

    .scenario-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .scenario-icon { font-size: 1.5rem; }

    .scenario-title {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.3rem;
      color: var(--gold);
    }

    .scenario-situation {
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1rem;
      color: rgba(255,255,255,0.9);
    }

    .scenario-question {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.1rem;
      color: var(--gold);
      margin-bottom: 1rem;
    }

    .scenario-choices {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .scenario-choice {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      padding: 0.75rem 1rem;
      cursor: pointer;
      transition: all 0.2s;
      border-radius: 6px;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .scenario-choice:hover { background: rgba(212,175,55,0.1); border-color: var(--gold); }
    .scenario-choice.answered { pointer-events: none; opacity: 0.6; }
    .scenario-choice.correct { background: rgba(34,197,94,0.2); border-color: var(--green); opacity: 1; }
    .scenario-choice.incorrect { background: rgba(197,48,48,0.2); border-color: var(--red); opacity: 1; }

    .choice-letter {
      background: var(--navy);
      color: var(--gold);
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      font-weight: 700;
      font-size: 0.8rem;
      flex-shrink: 0;
    }

    .choice-text { font-size: 0.9rem; line-height: 1.4; }

    .scenario-consequence {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      display: none;
    }

    .scenario-consequence.visible { display: block; }
    .scenario-consequence.good { background: rgba(34,197,94,0.15); border: 1px solid var(--green); }
    .scenario-consequence.bad { background: rgba(197,48,48,0.15); border: 1px solid var(--red); }
    .scenario-consequence.neutral { background: rgba(249,115,22,0.15); border: 1px solid var(--orange); }

    .consequence-title {
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .scenario-consequence.good .consequence-title { color: var(--green); }
    .scenario-consequence.bad .consequence-title { color: var(--red); }
    .scenario-consequence.neutral .consequence-title { color: var(--orange); }

    .consequence-text { font-size: 0.9rem; line-height: 1.5; margin-bottom: 0.75rem; }
    .consequence-lesson { font-style: italic; color: var(--gold); font-size: 0.85rem; }

    /* References */
    .references {
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(212,175,55,0.3);
      border-radius: 8px;
      padding: 1.5rem;
      max-width: 700px;
      text-align: left;
      font-size: 0.75rem;
      line-height: 1.8;
    }

    .references h4 {
      color: var(--gold);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .references ol { padding-left: 1.5rem; }
    .references li { margin-bottom: 0.5rem; color: rgba(255,255,255,0.8); }
    .references .journal { font-style: italic; }

    .text-center { text-align: center; }
    .mb-1 { margin-bottom: 1rem; }
    .mb-2 { margin-bottom: 2rem; }
    .mt-1 { margin-top: 1rem; }
    .mt-2 { margin-top: 2rem; }

    /* Interactive element focus states */
    .module-item:focus-visible {
      background: rgba(212,175,55,0.2);
      outline: 2px solid var(--gold);
      outline-offset: -2px;
    }
    .nav-btn:focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
      opacity: 1;
    }
    .progress-dot:focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
      transform: scale(1.5);
    }
    .quiz-option:focus-visible,
    .scenario-choice:focus-visible {
      outline: 2px solid var(--gold);
      outline-offset: 2px;
      background: rgba(212,175,55,0.15);
    }

    /* High contrast mode support */
    @media (prefers-contrast: high) {
      :root {
        --gold: #FFD700;
        --cream: #FFFFFF;
        --text: #000000;
      }
      .btn { border-width: 2px; }
      .slide.dark, .slide.black { background: #000; }
    }

    /* Print stylesheet */
    @media print {
      .sidebar, .content-header, .slide-nav, .header-actions { display: none !important; }
      .course-container { display: block; height: auto; }
      .main-content { overflow: visible; }
      .content-body { overflow: visible; }
      .slides-container { overflow: visible; position: static; }
      .module-slides { display: block !important; }
      .slide {
        position: static !important;
        opacity: 1 !important;
        visibility: visible !important;
        page-break-inside: avoid;
        page-break-after: always;
        min-height: 100vh;
        background: white !important;
        color: black !important;
      }
      .slide * { color: black !important; }
      .title { color: #1E2761 !important; }
      .refrain, .gold-line { color: #8B7500 !important; }
      .simple-box, .story-card, .decision-tree, .compare-box {
        border: 2px solid #333 !important;
        background: #f5f5f5 !important;
      }
    }

    /* Light theme */
    body.light-theme {
      --deep-navy: #f5f5f5;
      --navy: #e8e8e8;
      --cream: #1a1a2e;
      --text: #2D3748;
      --light-text: #4a5568;
    }
    body.light-theme .sidebar {
      background: linear-gradient(180deg, #f0f0f0 0%, #e0e0e0 100%);
      border-right-color: rgba(30,39,97,0.2);
    }
    body.light-theme .sidebar-header h1 { color: var(--navy); }
    body.light-theme .module-item:hover { background: rgba(30,39,97,0.1); }
    body.light-theme .module-item.active { background: rgba(30,39,97,0.15); border-left-color: #1E2761; }
    body.light-theme .module-number { background: rgba(30,39,97,0.1); color: #1E2761; }
    body.light-theme .module-item.active .module-number { background: #1E2761; color: white; }
    body.light-theme .module-title { color: #1a1a2e; }
    body.light-theme .module-subtitle { color: #4a5568; }
    body.light-theme .content-header { background: rgba(0,0,0,0.05); border-bottom-color: rgba(30,39,97,0.2); }
    body.light-theme .breadcrumb { color: #4a5568; }
    body.light-theme .breadcrumb span { color: #1E2761; }
    body.light-theme .btn { background: rgba(30,39,97,0.05); color: #1a1a2e; border-color: rgba(30,39,97,0.3); }
    body.light-theme .btn:hover { background: rgba(30,39,97,0.15); }
    body.light-theme .btn.primary { background: #1E2761; color: white; }
    body.light-theme .slide.dark,
    body.light-theme .slide.black,
    body.light-theme .slide.gradient,
    body.light-theme .slide.blood,
    body.light-theme .slide.hope,
    body.light-theme .slide.ipd,
    body.light-theme .slide.precision {
      background: #fafafa;
      color: #1a1a2e;
    }
    body.light-theme .title.gold { color: #1E2761; }
    body.light-theme .title.cream { color: #1a1a2e; }
    body.light-theme .refrain { color: #1E2761; }
    body.light-theme .refrain.warning { color: #C53030; border-left-color: #C53030; }
    body.light-theme .refrain.hope { color: #166534; }
    body.light-theme .refrain.insight { color: #1E40AF; }
    body.light-theme .rhetorical { color: #1a1a2e; }
    body.light-theme .rhetorical em { color: #1E2761; }
    body.light-theme .simple-box { background: linear-gradient(135deg, rgba(0,212,170,0.1), rgba(240,240,240,0.8)); }
    body.light-theme .story-card { background: rgba(0,0,0,0.03); }
    body.light-theme .story-card .narrative { color: #2D3748; }
    body.light-theme .decision-tree { background: rgba(0,0,0,0.03); }
    body.light-theme .nav-btn { background: rgba(0,0,0,0.1); color: #1a1a2e; border-color: rgba(0,0,0,0.2); }
    body.light-theme .slide-counter { color: #4a5568; }
    body.light-theme .progress-dot { background: rgba(0,0,0,0.2); }
    body.light-theme .progress-dot.active { background: #1E2761; }
    body.light-theme .sidebar-footer { color: #4a5568; }
    body.light-theme .gold-line { background: #1E2761; }

    /* Certificate Modal */
    .certificate-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }
    .certificate-modal.visible { display: flex; }
    .certificate {
      background: linear-gradient(135deg, #faf8f5 0%, #fff 100%);
      border: 8px solid #D4AF37;
      border-radius: 12px;
      padding: 3rem;
      max-width: 700px;
      width: 90%;
      text-align: center;
      position: relative;
      box-shadow: 0 25px 50px rgba(0,0,0,0.3);
    }
    .certificate-header {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 2.5rem;
      color: #1E2761;
      margin-bottom: 0.5rem;
    }
    .certificate-subtitle {
      font-size: 1rem;
      color: #718096;
      margin-bottom: 2rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }
    .certificate-body {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.2rem;
      color: #2D3748;
      line-height: 1.8;
      margin-bottom: 2rem;
    }
    .certificate-name {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 2rem;
      font-weight: 700;
      color: #1E2761;
      border-bottom: 2px solid #D4AF37;
      display: inline-block;
      padding: 0 2rem 0.5rem;
      margin: 1rem 0;
    }
    .certificate-date {
      font-size: 0.9rem;
      color: #718096;
      margin-top: 1.5rem;
    }
    .certificate-seal {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #D4AF37, #B8860B);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 1.5rem auto 0;
      color: white;
      font-size: 2rem;
      box-shadow: 0 4px 15px rgba(212,175,55,0.4);
    }
    .certificate-actions {
      margin-top: 2rem;
      display: flex;
      gap: 1rem;
      justify-content: center;
    }
    .certificate-actions button {
      padding: 0.75rem 1.5rem;
      border: 2px solid #1E2761;
      border-radius: 6px;
      background: white;
      color: #1E2761;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .certificate-actions button:hover {
      background: #1E2761;
      color: white;
    }
    .certificate-actions button.primary {
      background: #1E2761;
      color: white;
    }
    .certificate-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #718096;
    }
    .certificate-close:hover { color: #1E2761; }

    /* Name input for certificate */
    .certificate-input {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
      font-size: 1.5rem;
      text-align: center;
      border: none;
      border-bottom: 2px solid #D4AF37;
      background: transparent;
      padding: 0.5rem 1rem;
      width: 80%;
      max-width: 300px;
      color: #1E2761;
    }
    .certificate-input:focus {
      outline: none;
      border-bottom-color: #1E2761;
    }
    .mobile-menu-toggle{display:none;position:fixed;top:12px;left:12px;z-index:1001;background:#1E2761;border:1px solid #D4AF37;color:#D4AF37;width:40px;height:40px;border-radius:8px;font-size:1.2rem;cursor:pointer;align-items:center;justify-content:center;}
    @media(max-width:768px){.mobile-menu-toggle{display:flex;}.sidebar{transform:translateX(-100%);transition:transform 0.3s ease;position:fixed;z-index:1000;height:100vh;}.sidebar.open{transform:translateX(0);}.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:999;}.sidebar-overlay.show{display:block;}}
  </style>
</head>
<body>
<!-- Skip link for keyboard navigation -->
<a class="skip-link" href="#main-content">Skip to content</a>
<button aria-expanded="false" aria-label="Toggle navigation menu" class="mobile-menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
<div class="sidebar-overlay" onclick="document.querySelector('.sidebar').classList.remove('open');this.classList.remove('show');"></div>
<!-- Live region for screen reader announcements -->
<div aria-atomic="true" aria-live="polite" class="aria-live-region" id="ariaLiveRegion"></div>
<!-- Certificate Modal -->
<div aria-labelledby="certTitle" aria-modal="true" class="certificate-modal" id="certificateModal" role="dialog">
<div class="certificate" id="certificateContent">
<button aria-label="Fermer le certificat" class="certificate-close" onclick="closeCertificate()">√ó</button>
<div class="certificate-header" id="certTitle">Certificate of Completion</div>
<div class="certificate-subtitle">M√©ta-analyse des donn√©es des participants individuels</div>
<div class="certificate-body">
        Ceci certifie que<br/>
<input aria-label="Votre nom pour le certificat" class="certificate-input" id="certName" placeholder="Entrez votre nom" type="text"/>
<br/><br/>
        a termin√© avec succ√®s le cours<br/>
<strong>"The Hidden Patient: IPD Meta-Analysis"</strong><br/>
        demonstrating understanding of individual participant data<br/>
        m√©thodes de synth√®se et leurs applications cliniques.
      </div>
<div class="certificate-date" id="certDate"></div>
<div class="certificate-seal">‚úì</div>
<div class="certificate-actions">
<button aria-label="Imprimer le certificat" onclick="printCertificate()">üñ®Ô∏è Print</button>
<button aria-label="T√©l√©charger le certificat sous forme d'image" class="primary" onclick="downloadCertificate()">üì• Download</button>
</div>
</div>
</div>
<div aria-label="M√©ta-analyse IPD Cours" class="course-container">
<!-- Sidebar Navigation -->
<nav aria-label="Modules du cours" class="sidebar" role="navigation">
<div class="sidebar-header">
<a href="index.html" onmouseout="this.style.color='rgba(212,175,55,0.7)'" onmouseover="this.style.color='#D4AF37'" style="display:block;font-size:0.7rem;color:rgba(212,175,55,0.7);text-decoration:none;margin-bottom:0.5rem;">‚Üê Course Library</a>
<h1>Le patient cach√©</h1>
<p>M√©ta-analyse des donn√©es des participants individuels</p>
</div>
<div aria-label="Liste des modules" class="module-list" id="moduleList" role="list"></div>
<div class="sidebar-footer">
<div aria-live="polite" id="progressPercent" style="color:var(--gold);margin-bottom:0.5rem;font-weight:600;"></div>
        "Dans l'ensemble, l'individu dispara√Æt."
        <br/><br/>
        Chaque patient a une histoire. IPD vous permet de l'entendre.
        <br/><br/>
<details style="font-size:0.65rem;opacity:0.7;">
<summary style="cursor:pointer;">Keyboard shortcuts</summary>
<div style="margin-top:0.5rem;">
            ‚Üí / Space: Next slide<br/>
            ‚Üê: Previous slide<br/>
            Accueil : Premier module<br/>
            Fin : Dernier module
          </div>
</details>
</div>
</nav>
<!-- Main Content -->
<main class="main-content" role="main">
<header class="content-header">
<div class="breadcrumb">
          IPD Course &gt; <span id="currentModule">The Vanishing</span>
</div>
<div aria-label="Actions du cours" class="header-actions" role="toolbar">
<button aria-label="Toggle theme" class="btn" id="themeToggle" onclick="toggleTheme()" title="Toggle light/dark mode">‚òÄÔ∏è</button>
<button aria-label="R√©initialiser la progression du cours" class="btn" onclick="resetProgress()" title="Recommencer depuis le d√©but">Reset</button>
<button aria-label="Aller au module de r√©f√©rences" class="btn" onclick="goToModule(16)">References</button>
<button aria-label="Continue to next slide" class="btn primary" onclick="nextSlide()">Continue</button>
</div>
</header>
<div class="content-body">
<div aria-label="Cours slides" class="slides-container" id="main-content" role="region" tabindex="-1">
 ==================== MODULE 1¬†: LA DISPARITION (POURQUOI L'IPD IMPORTE) ===================== 
<div class="module-slides active" data-module="1">
<!-- Slide 1.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'as-tu pas vu comment un millier de patients<br/>
                  can be <em>reduced to a single number</em>,<br/>
                  et dans ce nombre, <em>des vies sont effac√©es</em>?
                </div>
</div>
</div>
 Diapositive 1.2¬†:¬†L'illusion globale 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">L'illusion globale</div>
<div class="story-card animate delay-1">
<div class="place">EVERY META-ANALYSIS YOU'VE EVER READ</div>
<div class="narrative">
                    A meta-analysis reports: "Treatment reduces mortality by 15%."
                    <br/><br/>
                    Mais quels patients en ont b√©n√©fici√© ? Les jeunes ou les vieux ? Ceux qui ont une maladie l√©g√®re ou grave ? Hommes ou femmes ?
                    <br/><br/>
<strong>L'agr√©gat ne peut pas r√©pondre.</strong>
<br/><br/>
                    Car dans la moyenne, certains patients ont √©t√© sauv√©s ‚Äì et d‚Äôautres ont √©t√© bless√©s.
                  </div>
</div>
</div>
</div>
 Diapositive 1.3¬†:¬†L'h√©t√©rog√©n√©it√© cach√©e 
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">What Aggregates Hide</div>
<div class="patient-grid animate delay-1">
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
<span class="patient-icon non-responder">‚óè</span>
<span class="patient-icon responder">‚óè</span>
</div>
<p class="animate delay-2" style="margin-top:1rem;font-size:0.9rem;">
<span style="color:var(--green);">‚óè Responders</span> ¬†
                  <span style="color:var(--red);">‚óè Non-responders</span>
</p>
<div class="simple-box animate delay-3">
<div class="simple-title">THE TRAGEDY</div>
<div class="simple-text">
                    "Overall benefit: 30%"<br/><br/>
                    But <strong>who</strong> sont les 30% ? Sans donn√©es individuelles, nous ne pouvons pas identifier les r√©pondeurs des non-r√©pondants. Nous ne pouvons pas pratiquer <strong>precision medicine</strong>.
                  </div>
</div>
</div>
</div>
<!-- Slide 1.4: The Breast Cancer Revelation -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Oxford, 1985</div>
<div class="story-card animate delay-1">
<div class="place">EARLY BREAST CANCER TRIALISTS' COLLABORATIVE GROUP</div>
<div class="narrative">
                    Richard Peto gathered something unprecedented: the <strong>raw data</strong>
                    on every woman in every tamoxifen trial.
                    <br/><br/>
                    Pas des r√©sum√©s. Pas des moyennes. <strong>Each patient, each tumor, each outcome.</strong>
<br/><br/>
                    What he discovered changed breast cancer treatment forever.
                  </div>
<div class="source">Early Breast Cancer Trialists' Collaborative Group. Lancet 1988;2:61-72</div>
</div>
</div>
</div>
 Diapositive 1.5¬†: La d√©couverte 
<div class="slide dark">
<div class="content text-center">
<div class="rhetorical animate">
                  Les essais publi√©s disaient¬†:<br/>
                  "Tamoxifen works."
                  <br/><br/>
                  But the <em>individual data</em> revealed:
                </div>
<div class="discovery-box animate delay-2">
<div class="insight">ER+ vs ER‚àí</div>
<div class="label">Tamoxifen only worked in estrogen receptor positive tumors</div>
</div>
<div class="simple-box animate delay-3">
<div class="simple-title">CE QUI √âTAIT CACH√â</div>
<div class="simple-text">
                    Aucun essai n‚Äô√©tait suffisamment vaste pour d√©tecter cette interaction. Seulement en combinant <strong>donn√©es individuelles des patients</strong> de toutes les √©preuves la v√©rit√© pourrait-elle √©merger¬†:<br/><br/>
<strong>Giving tamoxifen to ER‚àí patients was useless.</strong>
</div>
</div>
</div>
</div>
 Diapositive 1.6¬†:¬†Le refrain 
<div class="slide black">
<div class="content text-center">
<div class="refrain insight animate">
                  "Dans l'ensemble, l'individu dispara√Æt.<br/>
                  Dans l‚Äôindividu, la v√©rit√© appara√Æt.<br/>
                  C'est pourquoi nous recherchons le patient cach√©."
                </div>
<div class="gold-line animate delay-2"></div>
<p class="animate delay-3" style="color:rgba(255,255,255,0.6);font-style:italic;">
                  Il s'agit d'une m√©ta-analyse des donn√©es des participants individuels.
                </p>
</div>
</div>
</div>
 ==================== MODULE 2¬†: AGR√âGAT VS IPD ===================== 
<div class="module-slides" data-module="2">
<!-- Slide 2.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  What is lost when we summarize?<br/>
                  What is found when we look closer?
                </div>
</div>
</div>
 Diapositive 2.2¬†: Les deux approches 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Two Ways to Synthesize</div>
<div class="compare-grid animate delay-1">
<div class="compare-box aggregate">
<h4>Aggregate Data (AD)</h4>
<ul>
<li>Study-level summaries</li>
<li>Tailles d'effet des publications</li>
<li>Mean age, % male, etc.</li>
<li>Rapide et accessible</li>
<li>Cannot see within-study variation</li>
</ul>
</div>
<div class="compare-box ipd">
<h4>Donn√©es individuelles des participants (IPD)</h4>
<ul>
<li>Donn√©es brutes au niveau du patient</li>
<li>Every participant's characteristics</li>
<li>Actual ages, actual outcomes</li>
<li>Time-intensive to obtain</li>
<li>Can see who responds and who doesn't</li>
</ul>
</div>
</div>
</div>
</div>
 Diapositive 2.3¬†:¬†L'erreur √©cologique 
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">L'erreur √©cologique</div>
<div class="story-card animate delay-1">
<div class="place">LE DANGER DE LA PENS√âE AGR√âG√âE</div>
<div class="narrative">
                    Imagine two trials of a drug for heart failure.
                    <br/><br/>
                    Trial A: Mean age 55 years, Effect size 0.70 (benefit)<br/>
                    Trial B: Mean age 75 years, Effect size 0.90 (less benefit)
                    <br/><br/>
<strong>Tempting conclusion:</strong> "The drug works better in younger patients."
                    <br/><br/>
<strong>But this could be completely wrong.</strong>
</div>
</div>
</div>
</div>
<!-- Slide 2.4: Why It's Wrong -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">The Trap</div>
<div class="simple-box animate delay-1">
<div class="simple-title">ECOLOGICAL FALLACY</div>
<div class="simple-text">
                    Dans chaque essai, la relation entre l'√¢ge et l'effet du traitement peut provenir <strong>completely different</strong> de la relation entre les essais.
                    <br/><br/>
                    Perhaps in Trial A, <em>older</em> patients within that trial responded better.
                    Perhaps in Trial B, <em>younger</em> patients within that trial responded better.
                    <br/><br/>
<strong>Vous ne pouvez pas savoir sans individu data.</strong>
</div>
</div>
<div class="formula-box animate delay-2">
<div class="label">THE RULE</div>
<div class="formula">Between-study relationships ‚â† Within-study relationships</div>
<div class="label">Aggregate data can only show between-study patterns</div>
</div>
</div>
</div>
<!-- Slide 2.5: What IPD Enables -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">What IPD Enables</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number" style="background:var(--blue);">1</div>
<div class="lesson-content">
<h4>True Effect Modification</h4>
<p>Test whether treatment effect varies by patient characteristics (age, biomarkers, disease severity)</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number" style="background:var(--blue);">2</div>
<div class="lesson-content">
<h4>Time-to-Event Analysis</h4>
<p>Use actual survival curves, not just hazard ratios. Handle censoring properly.</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number" style="background:var(--blue);">3</div>
<div class="lesson-content">
<h4>Consistent Definitions</h4>
<p>Standardize outcome definitions, exposure timing, covariate categories across studies</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number" style="background:var(--blue);">4</div>
<div class="lesson-content">
<h4>Subgroup Credibility</h4>
<p>Testez les interactions au sein des √©tudes, en √©vitant l'erreur √©cologique</p>
</div>
</div>
</div>
</div>
<!-- Slide 2.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "Les donn√©es agr√©g√©es montrent la for√™t.<br/>
                  Individual data shows each tree.<br/>
                  Si vous avez besoin de savoir quels arbres sont malades‚Äî<br/>
                  you must walk among them."
                </div>
</div>
</div>
</div>
 ================= MODULE 3 : LA R√âV√âLATION CTT (STATINS) ==================== 
<div class="module-slides" data-module="3">
<!-- Slide 3.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'avez-vous pas vu comment <em>one collaboration</em><br/>
                  gathered data on <em>170,000 patients</em><br/>
                  and answered questions no single trial could ask?
                </div>
</div>
</div>
 Diapositive 3.2¬†: Le CTT 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Oxford, 1994-Present</div>
<div class="story-card animate delay-1">
<div class="place">CHOLESTEROL TREATMENT TRIALISTS' COLLABORATION</div>
<div class="narrative">
                    Le CTT a collect√© des donn√©es individuelles de <strong>every major statin trial</strong>.
                    <br/><br/>
                    27 trials. 174,149 patients. Every baseline characteristic.
                    Every cardiovascular event. Every death.
                    <br/><br/>
                    The published trials asked: "Do statins work?"
                    <br/><br/>
                    Le CTT a demand√©¬†: <strong>"Pour qui les statines fonctionnent-elles¬†?"</strong>
</div>
<div class="source">CTT Collaboration. Lancet 2010;376:1670-81</div>
</div>
</div>
</div>
 Diapositive 3.3¬†: Les chiffres 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">L'√©chelle des IPD</div>
<div class="stats-grid animate delay-1">
<div class="stat-box">
<div class="stat-value" style="color:var(--blue);">27</div>
<div class="stat-label">Trials Combined</div>
</div>
<div class="stat-box">
<div class="stat-value" style="color:var(--gold);">174,149</div>
<div class="stat-label">Individual Patients</div>
</div>
<div class="stat-box">
<div class="stat-value" style="color:var(--teal);">5</div>
<div class="stat-label">Ann√©es de donn√©es Rassemblement</div>
</div>
</div>
<div class="simple-box blue animate delay-2">
<div class="simple-title">THE INVESTMENT</div>
<div class="simple-text">
                    La collecte d'IPD n√©cessite des ann√©es de n√©gociation, de transfert de donn√©es, de nettoyage et d'harmonisation.
                    <br/><br/>
                    Mais les questions auxquelles vous pouvez r√©pondre valent la peine <strong>l'investissement</strong>.
                  </div>
</div>
</div>
</div>
 Diapositive 3.4¬†:¬†Le D√©couverte 
<div class="slide precision">
<div class="content text-center">
<div class="title purple animate">What CTT Discovered</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Benefit Proportional to LDL Reduction</h4>
<p>Every 1 mmol/L LDL reduction = 22% lower CV events. True across all subgroups.</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>No Age Threshold</h4>
<p>Benefit continues even in patients &gt;75 years (contradicting earlier AD analyses)</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Primary Prevention Works</h4>
<p>Patients without prior CVD benefit proportionally to their baseline risk</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number" style="background:var(--red);">‚úó</div>
<div class="lesson-content">
<h4>No Cancer Signal</h4>
<p>Les inqui√©tudes concernant les statines provoquant le cancer ont √©t√© d√©finitivement r√©fut√©es gr√¢ce au suivi de l'IPD</p>
</div>
</div>
</div>
</div>
 Diapositive 3.5¬†:¬†Pourquoi AD n'a pas pu r√©pondre 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Pourquoi l'agr√©gation des donn√©es a √©chou√©</div>
<div class="story-card animate delay-1">
<div class="place">THE LIMITATION</div>
<div class="narrative">
                    Published trials categorized patients differently.
                    <br/><br/>
                    Trial A: "High risk" = 10-year CVD risk &gt;20%<br/>
                    Trial B: "High risk" = Prior MI<br/>
                    Trial C: "High risk" = Diabetes
                    <br/><br/>
                    You cannot compare or combine what is defined differently.
                    <br/><br/>
<strong>IPD allowed the CTT to redefine everyone consistently.</strong>
</div>
</div>
</div>
</div>
<!-- Slide 3.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain hope animate">
                  "When trials speak different languages,<br/>
                  IPD fournit le traduction.<br/>
                  What seemed contradictory becomes clear:<br/>
                  the same truth, measured differently."
                </div>
</div>
</div>
</div>
<!-- ==================== MODULE 4: WHEN TO PURSUE IPD (DECISION TREE) ==================== -->
<div class="module-slides" data-module="4">
<!-- Slide 4.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  IPD takes <em>years</em> to gather.<br/>
                  Les donn√©es agr√©g√©es prennent <em>weeks</em>.<br/>
<br/>
                  Quand l'investissement en vaut-il la peine¬†?
                </div>
</div>
</div>
 Diapositive 4.2¬†: Le cadre d√©cisionnel 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">L'arbre de d√©cision</div>
<div class="decision-tree animate delay-1">
<h4>Devriez-vous poursuivre l'IPD¬†?</h4>
<div class="tree-level">
<div class="tree-node root">Votre question concerne-t-elle modification de l'effet du traitement¬†?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div>
<div class="tree-node yes">YES</div>
<div class="tree-label">"Who benefits most?"</div>
</div>
<div>
<div class="tree-node no">NO</div>
<div class="tree-label">"Does it work overall?"</div>
</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div class="tree-node ipd">IPD likely needed</div>
<div class="tree-node aggregate">AD may suffice</div>
</div>
</div>
</div>
</div>
<!-- Slide 4.3: More Criteria -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">When IPD Is Essential</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number">1</div>
<div class="lesson-content">
<h4>Time-to-Event Outcomes</h4>
<p>Lorsque les courbes de survie sont importantes, pas seulement les rapports de risque finaux.</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number">2</div>
<div class="lesson-content">
<h4>Continuous Effect Modifiers</h4>
<p>Testing whether treatment effect varies by age, BMI, biomarker level (not just "high" vs "low")</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number">3</div>
<div class="lesson-content">
<h4>Outcome Definition Problems</h4>
<p>Lorsque les essais d√©finissent les r√©sultats diff√©remment et que vous devez les normaliser</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number">4</div>
<div class="lesson-content">
<h4>Longer Follow-Up Available</h4>
<p>Lorsque les auteurs des essais disposent de donn√©es de suivi non publi√©es, vous souhaitez include</p>
</div>
</div>
</div>
</div>
<!-- Slide 4.4: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-ipd-decision">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">La d√©cision strat√©gique de recherche</span>
</div>
<div class="scenario-situation">
                    Vous planifiez une m√©ta-analyse des corticost√©ro√Ødes pour la pneumonie COVID-19. Vous disposez de 10 ECR √©ligibles avec des donn√©es publi√©es. Un coll√®gue demande¬†:¬†¬´¬†Devrions-nous essayer d'obtenir une IPD ou simplement faire une analyse globale¬†?¬†¬ª
                    <br/><br/>
                    Votre question cl√© est¬†: "Les b√©n√©fices varient-ils en fonction de la gravit√© de la maladie et du moment du traitement¬†?"
                  </div>
<div class="scenario-question">Que recommandez-vous¬†?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('ipd-decision', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">Faites simplement l'AD - nous avons besoin de r√©sultats rapides et l'IPD prend trop de temps</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('ipd-decision', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Poursuivre l'IPD - notre question porte sur la modification de l'effet en fonction des caract√©ristiques du patient</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('ipd-decision', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Effectuer une analyse de sous-groupe par cat√©gories de gravit√© au niveau des essais tir√©es des publications</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-ipd-decision"></div>
</div>
</div>
</div>
<!-- Slide 4.5: When AD Is Enough -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Quand les donn√©es agr√©g√©es suffisent</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number" style="background:var(--orange);">‚úì</div>
<div class="lesson-content">
<h4>Overall Treatment Effect</h4>
<p>Quand votre seule question est ¬´¬†Est-ce que √ßa marche¬†?¬†¬ª pas "Pour qui ?"</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number" style="background:var(--orange);">‚úì</div>
<div class="lesson-content">
<h4>Homogeneous Population</h4>
<p>When trials enrolled similar patients and effect modification is unlikely</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number" style="background:var(--orange);">‚úì</div>
<div class="lesson-content">
<h4>Binary Outcomes, Short Follow-up</h4>
<p>Quand la censure n'est pas un probl√®me et que les r√©sultats sont simples oui/non</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number" style="background:var(--orange);">‚úì</div>
<div class="lesson-content">
<h4>IPD Unobtainable</h4>
<p>Lorsque les testeurs ne partagent pas, les donn√©es sont perdues ou les ressources ne sont pas disponibles</p>
</div>
</div>
</div>
</div>
<!-- Slide 4.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "Toutes les questions ne n√©cessitent pas l'individu.<br/>
                  Mais chaque question sur <em>which</em> individuals<br/>
                  exige leur pr√©sence dans vos donn√©es."
                </div>
</div>
</div>
</div>
 ==================== MODULE 5¬†:¬†UN √âTAGE VS DEUX √âTAGES ===================== 
<div class="module-slides" data-module="5">
<!-- Slide 5.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  Vous avez rassembl√© les donn√©es individuelles.<br/>
<br/>
                  Maintenant¬†: l‚Äôanalysez-vous comme <em>one combined dataset</em><br/>
                  or <em>trial by trial, then combine</em>?
                </div>
</div>
</div>
<!-- Slide 5.2: Two Approaches -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Two Analytical Approaches</div>
<div class="compare-grid animate delay-1">
<div class="compare-box aggregate">
<h4>Two-Stage Approach</h4>
<ul>
<li>Stage 1: Analyze each trial separately</li>
<li>√âtape 2¬†: M√©ta-analyser les r√©sultats</li>
<li>Preserves trial structure</li>
<li>Familiar (like standard MA)</li>
<li>Cannot handle sparse data well</li>
</ul>
</div>
<div class="compare-box ipd">
<h4>One-Stage Approach</h4>
<ul>
<li>Analyser toutes les donn√©es simultan√©ment</li>
<li>Mixed-effects regression model</li>
<li>Effets al√©atoires pour le clustering</li>
<li>Mieux pour les donn√©es clairsem√©es</li>
<li>More flexible modeling</li>
</ul>
</div>
</div>
</div>
</div>
<!-- Slide 5.3: Two-Stage Explained -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Deux √©tapes¬†: le chemin familier</div>
<div class="formula-box animate delay-1">
<div class="label">STAGE 1 (Within Each Trial)</div>
<div class="formula">Estimate treatment effect for trial k: Œ∏<sub>k</sub></div>
<div class="label">Utiliser les donn√©es individuelles des patients de cet essai</div>
</div>
<div class="formula-box animate delay-2">
<div class="label">STAGE 2 (Across Trials)</div>
<div class="formula">Meta-analyze Œ∏<sub>1</sub>, Œ∏<sub>2</sub>, ... Œ∏<sub>K</sub></div>
<div class="label">Utilisation de m√©thodes standard √† effets al√©atoires</div>
</div>
<div class="simple-box animate delay-3">
<div class="simple-title">ADVANTAGE</div>
<div class="simple-text">
                    Easy to understand. Easy to explain.
                    <br/>
                    Each trial's estimate is transparent.
                    <br/>
                    Des parcelles foresti√®res famili√®res et moi<sup>2</sup> statistics.
                  </div>
</div>
</div>
</div>
<!-- Slide 5.4: One-Stage Explained -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Une √©tape¬†: la voie puissante</div>
<div class="formula-box animate delay-1">
<div class="label">MIXED-EFFECTS MODEL</div>
<div class="formula">Y<sub>ij</sub> = Œ≤<sub>0</sub> + Œ≤<sub>1</sub>Treatment<sub>ij</sub> + u<sub>j</sub> + Œµ<sub>ij</sub></div>
<div class="label">i = patient, j = trial, u<sub>j</sub> = random trial effect</div>
</div>
<div class="simple-box blue animate delay-2">
<div class="simple-title">ADVANTAGES</div>
<div class="simple-text">
<strong>1.</strong> Handles trials with zero events (no continuity corrections)<br/>
<strong>2.</strong> More powerful for detecting interactions<br/>
<strong>3.</strong> Can model complex covariate relationships<br/>
<strong>4.</strong> Exact likelihood (no normal approximations)
                  </div>
</div>
</div>
</div>
<!-- Slide 5.5: Decision Tree -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Choisir votre approche</div>
<div class="decision-tree animate delay-1">
<h4>One-Stage or Two-Stage?</h4>
<div class="tree-level">
<div class="tree-node question">Do trials have sparse events (rare outcomes)?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div>
<div class="tree-node yes">YES (sparse)</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node ipd">One-stage preferred</div>
<div class="tree-label">Avoids zero-cell problems</div>
</div>
<div>
<div class="tree-node no">NO (common events)</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node aggregate">Either works</div>
<div class="tree-label">Les r√©sultats devraient √™tre similaires</div>
</div>
</div>
</div>
</div>
</div>
<!-- Slide 5.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "The two-stage preserves each trial's voice.<br/>
                  The one-stage hears all voices at once.<br/>
                  Lorsque les donn√©es sont rares et les √©v√©nements rares¬†:<br/>
                  le premier √©tage rattrape ce que le deux √©tages manque. ¬ª
                </div>
</div>
</div>
</div>
 ====================== MODULE 6 : L'HISTOIRE DU TIMING DES CORTICOST√âRO√èDES ===================== 
<div class="module-slides" data-module="6">
<!-- Slide 6.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'avez-vous pas entendu l'histoire de la drogue<br/>
                  qui a sauv√© la vie de b√©b√©s...<br/>
<em>but only if given at the right time</em>?
                </div>
</div>
</div>
<!-- Slide 6.2: Preterm Birth -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Le paradoxe du pr√©matur√©</div>
<div class="story-card animate delay-1">
<div class="place">NEONATAL INTENSIVE CARE UNITS WORLDWIDE</div>
<div class="narrative">
                    Les corticost√©ro√Ødes pr√©natals r√©duisent la mortalit√© chez les pr√©matur√©s. Celui-ci a √©t√© cr√©√© dans les ann√©es 1970.
                    <br/><br/>
                    But a puzzle remained: <strong>When should they be given?</strong>
<br/><br/>
                    24 hours before birth? 48 hours? A week?
                    <br/><br/>
                    Published trials couldn't answer‚Äîthey didn't report timing consistently.
                  </div>
<div class="source">Roberts D, et al. Cochrane Database Syst Rev 2017</div>
</div>
</div>
</div>
 Diapositive 6.3¬†: La solution IPD 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">IPD a r√©v√©l√© la fen√™tre</div>
<div class="stats-grid animate delay-1">
<div class="stat-box" style="border: 2px solid var(--green);">
<div class="stat-value" style="color:var(--green);">24h-7d</div>
<div class="stat-label">Optimal Window</div>
</div>
<div class="stat-box" style="border: 2px solid var(--red);">
<div class="stat-value" style="color:var(--red);">&gt;7 days</div>
<div class="stat-label">Benefit Wanes</div>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">THE DISCOVERY</div>
<div class="simple-text">
                    By examining each baby's exact time from steroid to delivery,
                    IPD meta-analysis showed:
                    <br/><br/>
<strong>Maximum benefit:</strong> 24 hours to 7 days before birth<br/>
<strong>Reduced benefit:</strong> &gt;7 days (lung maturity effect fades)<br/>
<strong>No benefit:</strong> &lt;24 hours (not enough time to work)
                  </div>
</div>
</div>
</div>
<!-- Slide 6.4: Clinical Impact -->
<div class="slide hope">
<div class="content text-center">
<div class="title green animate">Lives Saved, Practice Changed</div>
<div class="story-card animate delay-1">
<div class="place">L'IMPACT CLINIQUE</div>
<div class="narrative">
                    Avant l‚ÄôIPD¬†: les cliniciens donnaient des st√©ro√Ødes et esp√©raient le meilleur.
                    <br/><br/>
                    After IPD: Guidelines now recommend <strong>repeat dosing</strong>
                    si la livraison n'a pas eu lieu dans les 7 jours suivant le premier cours.
                    <br/><br/>
                    Cette pr√©cision, impossible sans donn√©es individuelles, a <strong>saved thousands of premature babies</strong>.
                  </div>
</div>
<div class="discovery-box animate delay-2">
<div class="insight">Timing is Treatment</div>
<div class="label">Le m√™me m√©dicament, administr√© au mauvais moment, pourrait tout aussi bien √™tre un placebo</div>
</div>
</div>
</div>
<!-- Slide 6.5: Why AD Failed -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Pourquoi les donn√©es agr√©g√©es n'ont pas pu montrer cela</div>
<div class="simple-box animate delay-1">
<div class="simple-title">THE PROBLEM</div>
<div class="simple-text">
                    Trial A reported: "Steroid given within 48 hours"<br/>
                    Trial B reported: "Steroid given antenatally"<br/>
                    Trial C reported: "Steroid-to-delivery interval: median 3 days"
                    <br/><br/>
                    Different categories. Different definitions. <strong>Incompatible summaries.</strong>
<br/><br/>
                    Only by examining each baby's actual steroid-to-delivery time
                    could the optimal window be identified.
                  </div>
</div>
</div>
</div>
<!-- Slide 6.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain hope animate">
                  "Le m√©dicament √©tait connu pour fonctionner.<br/>
                  But <em>when</em> le donner √©tait inconnu.<br/>
                  IPD a transform√© ¬´ parfois ¬ª en ¬´ le bon moment ¬ª‚Äî<br/>
                  et dans cette pr√©cision, les enfants vivaient.
                </div>
</div>
</div>
</div>
 =================== MODULE 7 : OBTENIR IPD (LA QU√äTE) ==================== 
<div class="module-slides" data-module="7">
<!-- Slide 7.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  Les donn√©es existent.<br/>
                  Quelque part, dans des fichiers et des bases de donn√©es,<br/>
<em>l'histoire de chaque patient est enregistr√©e</em>.<br/>
<br/>
                  La question est : vont-ils la partager ?
                </div>
</div>
</div>
 Diapositive 7.2¬†:¬†La Qu√™te 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La qu√™te des donn√©es</div>
<div class="stats-grid animate delay-1">
<div class="stat-box">
<div class="stat-value" style="color:var(--green);">60-80%</div>
<div class="stat-label">Typical IPD Retrieval Rate</div>
</div>
<div class="stat-box">
<div class="stat-value" style="color:var(--red);">6-24</div>
<div class="stat-label">Months to Gather</div>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">REALITY CHECK</div>
<div class="simple-text">
                    Vous le ferez probablement <strong>not</strong> get 100% of trials.
                    Some investigators will refuse. Some data is lost.
                    Some companies won't share.
                    <br/><br/>
<strong>This is expected.</strong> Plan for it.
                  </div>
</div>
</div>
</div>
 Diapositive 7.3¬†: Sources de donn√©es 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Where IPD Lives</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number">1</div>
<div class="lesson-content">
<h4>Trialist Collaboration</h4>
<p>Direct contact with trial investigators. Build relationships. Offer co-authorship.</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number">2</div>
<div class="lesson-content">
<h4>Plateformes de partage de donn√©es</h4>
<p>YODA Project, ClinicalStudyDataRequest.com, Vivli, ICPSR</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number">3</div>
<div class="lesson-content">
<h4>Regulatory Agencies</h4>
<p>EMA Policy 0070, FDA (limited), Health Canada</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number">4</div>
<div class="lesson-content">
<h4>Journal Requirements</h4>
<p>Many journals now require data sharing; check supplementary materials</p>
</div>
</div>
</div>
</div>
 Diapositive 7.4¬†: La collaboration Lettre 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">The Approach</div>
<div class="story-card animate delay-1">
<div class="place">HOW TO ASK</div>
<div class="narrative">
<strong>1. Commencez par votre question</strong>‚Äîexplain why IPD is essential
                    <br/><br/>
<strong>2. Offer co-authorship</strong>‚Äîmake sharing worthwhile
                    <br/><br/>
<strong>3. D√©crire la s√©curit√© des donn√©es</strong>‚Äîhow you'll protect their patients
                    <br/><br/>
<strong>4. Fournir des dictionnaires de donn√©es</strong>‚Äîspecify exactly what you need
                    <br/><br/>
<strong>5. Set clear timelines</strong>‚Äîrespect their time
                  </div>
</div>
</div>
</div>
<!-- Slide 7.5: Missing IPD Problem -->
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">Le pi√®ge du biais de disponibilit√©</div>
<div class="simple-box animate delay-1">
<div class="simple-title">THE DANGER</div>
<div class="simple-text">
                    Et si les essais qui <strong>share data</strong> sont syst√©matiquement diff√©rents des essais qui <strong>don't share</strong>?
                    <br/><br/>
                    Industry trials: less likely to share<br/>
                    Negative trials: less likely to share<br/>
                    Older trials: data may be lost
                    <br/><br/>
<strong>Your IPD sample may be biased.</strong>
</div>
</div>
<div class="formula-box animate delay-2">
<div class="label">THE RULE</div>
<div class="formula">Always compare: IPD trials vs. non-IPD trials</div>
<div class="label">Do they differ in effect size, sample size, funding source?</div>
</div>
</div>
</div>
<!-- Slide 7.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "Les donn√©es existent. La question est de confiance.<br/>
                  Will they share what they have guarded?<br/>
                  Construire le pont soigneusement‚Äî<br/>
                  car sur ce pont, l'avenir des patients se croise."
                </div>
</div>
</div>
</div>
 ==================== MODULE 8 : HARMONIZATION DES DONNEES ==================== 
<div class="module-slides" data-module="8">
<!-- Slide 8.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  Vous avez rassembl√© les data<br/>
                  from twelve trials, five countries, three decades.<br/>
<br/>
                  But Trial A calls it <em>"cardiovascular death"</em><br/>
                  et l'essai B l'appelle <em>"cardiac mortality"</em>.<br/>
<br/>
                  Sont-ils identiques¬†?
                </div>
</div>
</div>
 Diapositive 8.2¬†: Le d√©fi de l'harmonisation 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Le probl√®me de la tour de Babel</div>
<div class="story-card animate delay-1">
<div class="place">EVERY IPD META-ANALYSIS</div>
<div class="narrative">
                    Trial from Japan: Age in years since 1900 (e.g., "54" = 1954 birth)<br/>
                    Trial from USA: Age in decimal years (e.g., 65.7)<br/>
                    Essai du Royaume-Uni¬†: tranches d'√¢ge ("65-74")<br/><br/>
                    Diabetes: HbA1c ‚â• 6.5% vs. fasting glucose ‚â• 126 vs. "physician diagnosis"<br/><br/>
                    Outcome: "Major adverse cardiac event" (one trial includes stroke, another doesn't)<br/><br/>
<strong>Avant analyse¬†: harmoniser tout.</strong>
</div>
</div>
</div>
</div>
 Diapositive 8.3¬†: Le processus 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Le processus d'harmonisation</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number">1</div>
<div class="lesson-content">
<h4>Cr√©er un dictionnaire de donn√©es principal</h4>
<p>Define every variable you need: name, type, permitted values, derivation rules</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number">2</div>
<div class="lesson-content">
<h4>Map Each Trial's Variables</h4>
<p>Document how each trial's coding maps to your standardized definitions</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number">3</div>
<div class="lesson-content">
<h4>V√©rifier aupr√®s Trialistes</h4>
<p>V√©rifiez vos interpr√©tations. Ils connaissent leurs donn√©es mieux que vous.</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number">4</div>
<div class="lesson-content">
<h4>Validate Transformations</h4>
<p>Reproduire les r√©sultats publi√©s de l'IPD. S'ils ne correspondent pas, enqu√™tez.</p>
</div>
</div>
</div>
</div>
<!-- Slide 8.4: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-harmonization">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">Le dilemme de d√©finition</span>
</div>
<div class="scenario-situation">
                    Vous harmonisez l'IPD √† partir de 8 essais sur le diab√®te. Votre crit√®re de jugement principal est la ¬´ mort cardiovasculaire ¬ª.
                    <br/><br/>
                    Six essais utilisaient une d√©finition standard (codes CIM). Deux essais des ann√©es 1990 utilisaient la ¬´ mort cardiaque √©valu√©e par l'investigateur ¬ª sans crit√®res standardis√©s. Ces deux essais montrent des effets de traitement plus importants.
                  </div>
<div class="scenario-question">Comment g√©rez-vous cela¬†?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('harmonization', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">Incluez les 8 essais - plus de donn√©es sont meilleures et les d√©finitions sont ¬´ suffisamment proches ¬ª</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('harmonization', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Exclude the 2 non-standardized trials to maintain outcome consistency</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('harmonization', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Analyse primaire avec 6 essais coh√©rents¬†; analyse de sensibilit√© en ajoutant les 2 autres</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-harmonization"></div>
</div>
</div>
</div>
 Diapositive 8.5¬†: L'√©tape de validation 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La validation cruciale</div>
<div class="simple-box animate delay-1">
<div class="simple-title">THE TEST</div>
<div class="simple-text">
<strong>Avant toute nouvelle analyse :</strong>
<br/><br/>
                    Reproduisez les r√©sultats publi√©s de chaque essai √† partir de l‚ÄôIPD.
                    <br/><br/>
                    Si votre analyse donne RR = 0,78 mais que la publication indique RR = 0,85,
                    <br/>
<strong>something is wrong.</strong>
<br/><br/>
                    Find the discrepancy. Fix it. Then proceed.
                  </div>
</div>
</div>
</div>
<!-- Slide 8.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "Different languages, different rulers,<br/>
                  different ways to name the same disease.<br/>
                  Avant de pouvoir combiner, vous devez traduire.<br/>
                  Avant de traduire, il faut comprendre."
                </div>
</div>
</div>
</div>
 ==================== MODULE 9 : TEST DES INTERACTIONS ===================== 
<div class="module-slides" data-module="9">
<!-- Slide 9.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  Le traitement fonctionne <em>on average</em>.<br/>
<br/>
                  Mais est-ce que cela fonctionne de la m√™me mani√®re pour les jeunes et les vieux ?<br/>
                  Pour les cas l√©gers et graves ?<br/>
                  Pour celui avec le biomarqueur et celui sans ?
                </div>
</div>
</div>
<!-- Slide 9.2: The Tamoxifen Discovery Revisited -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">L'interaction qui a chang√© l'oncologie</div>
<div class="story-card animate delay-1">
<div class="place">EBCTCG, 1985-1998</div>
<div class="narrative">
                    The Early Breast Cancer Trialists' Group didn't just ask "Does tamoxifen work?"
                    <br/><br/>
                    They asked: <strong>"Does the effect differ by estrogen receptor status?"</strong>
<br/><br/>
                    L‚Äôinteraction a √©t√© massive¬†:
                    <br/><br/>
                    ER-positive: 47% reduction in recurrence<br/>
                    ER-negative: <strong>No benefit at all</strong>
</div>
<div class="source">EBCTCG. Lancet 1998;351:1451-67</div>
</div>
<div class="discovery-box animate delay-2">
<div class="insight">p<sub>interaction</sub> &lt; 0.00001</div>
<div class="label">The most important interaction in cancer medicine</div>
</div>
</div>
</div>
<!-- Slide 9.3: How to Test Interactions -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Testing Treatment-Covariate Interactions</div>
<div class="formula-box animate delay-1">
<div class="label">THE MODEL</div>
<div class="formula">Outcome = Œ≤<sub>1</sub>Treatment + Œ≤<sub>2</sub>Covariate + Œ≤<sub>3</sub>(Treatment √ó Covariate)</div>
<div class="label">Œ≤<sub>3</sub> is the interaction term - does treatment effect vary by covariate?</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">INTERPRETATION</div>
<div class="simple-text">
                    If Œ≤<sub>3</sub> is statistically significant:
                    <br/><br/>
                    L'effet du traitement <strong>differs</strong> between subgroups defined by the covariate.
                    <br/><br/>
                    Sinon¬†: l‚Äôeffet du traitement est <strong>similar</strong> across subgroups
                    (or you lack power to detect a difference).
                  </div>
</div>
</div>
</div>
<!-- Slide 9.4: Within vs Between Study Interactions -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La distinction critique</div>
<div class="compare-grid animate delay-1">
<div class="compare-box aggregate">
<h4>Between-Study Interaction</h4>
<ul>
<li>Compares trial-level averages</li>
<li>Ecological fallacy risk</li>
<li>Confounded by trial design</li>
<li>Low statistical power</li>
<li>Peut faire avec des donn√©es agr√©g√©es</li>
</ul>
</div>
<div class="compare-box ipd">
<h4>Within-Study Interaction</h4>
<ul>
<li>Compares patients within each trial</li>
<li>No ecological fallacy</li>
<li>Randomization preserved</li>
<li>Much higher power</li>
<li>Requires IPD</li>
</ul>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">L'APER√áU CL√â</div>
<div class="simple-text">
                    IPD vous permet de tester <strong>within-study interactions</strong>,
                    where randomization ensures the comparison is fair.
                    <br/><br/>
                    C‚Äôest la r√©f√©rence en mati√®re de modification des effets.
                  </div>
</div>
</div>
</div>
<!-- Slide 9.5: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-interaction">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">La question de l'interaction avec l'√¢ge</span>
</div>
<div class="scenario-situation">
                    Votre m√©ta-analyse IPD de l'anticoagulation pour la fibrillation auriculaire inclut 12 000 patients. Vous testez l‚Äôinteraction selon l‚Äô√¢ge et trouvez p = 0,03. Les patients de ‚â• 75 ans pr√©sentent un b√©n√©fice plus important (RR 0,55) que les patients de &lt; 75 ans (RR 0,72).
                    <br/><br/>
                    Vous avez test√© 8 modificateurs d‚Äôeffets potentiels dans votre analyse.
                  </div>
<div class="scenario-question">Comment interpr√©tez-vous ce constat ?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('interaction', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">Signalez que l'anticoagulation fonctionne mieux chez les patients √¢g√©s - l'interaction est significative</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('interaction', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Apply multiple testing correction; with 8 tests, p=0.03 is likely a false positive</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('interaction', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Report as hypothesis-generating, note the multiple comparisons, request external validation</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-interaction"></div>
</div>
</div>
</div>
<!-- Slide 9.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "La moyenne cache l'interaction.<br/>
                  The interaction reveals who benefits.<br/>
                  Testez-le au sein des √©tudes, pas entre...<br/>
                  car c'est l√† que se trouve la v√©rit√©.
                </div>
</div>
</div>
</div>
 ==================== MODULE 10¬†: PRONOSTIC ET PR√âDICTION ==================== 
<div class="module-slides" data-module="10">
<!-- Slide 10.1: Opening -->
<div class="slide dark active">
<div class="content text-center">
<div class="rhetorical animate">
                  L‚ÄôIPD ne concerne pas uniquement les traitements.<br/>
<br/>
                  Quand tu cherches √† <em>predict</em> who will die,<br/>
                  who will recover, who will relapse‚Äî<br/>
<em>l'individu est tout</em>.
                </div>
</div>
</div>
 Diapositive 10.2¬†:¬†L'histoire d'IMPACT 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Predicting Recovery After Brain Injury</div>
<div class="story-card animate delay-1">
<div class="place">IMPACT CONSORTIUM, 2005-PRESENT</div>
<div class="narrative">
                    Apr√®s un traumatisme cr√¢nien, les familles se posent la question d√©vastatrice¬†:
                    <br/><br/>
<strong>"Will they ever wake up?"</strong>
<br/><br/>
                    Individual trials were too small to develop accurate prediction models.
                    <br/><br/>
                    IMPACT a rassembl√© les IPD de 11 √©tudes, portant sur 9¬†205 patients, et a construit un mod√®le qui pr√©dit les r√©sultats √† 6 mois √† partir des caract√©ristiques cliniques initiales.
                  </div>
<div class="source">IMPACT Study Group. PLoS Med 2008;5:e165</div>
</div>
</div>
</div>
<!-- Slide 10.3: Why IPD for Prognosis -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Why Prognosis Demands IPD</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number">1</div>
<div class="lesson-content">
<h4>External Validation Across Populations</h4>
<p>Develop in some studies, validate in others. True test of generalizability.</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number">2</div>
<div class="lesson-content">
<h4>Non-linear Relationships</h4>
<p>Explore how predictors relate to outcome: linear? threshold? U-shaped?</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number">3</div>
<div class="lesson-content">
<h4>Multiple Predictor Interactions</h4>
<p>Age + GCS + pupil reactivity may interact in ways aggregate data cannot reveal</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number">4</div>
<div class="lesson-content">
<h4>Proper Handling of Missing Predictors</h4>
<p>Imputation multiple au niveau du patient, pas au niveau de l'√©tude</p>
</div>
</div>
</div>
</div>
<!-- Slide 10.4: The TRIPOD+PRISMA-IPD Framework -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Reporting Standards</div>
<div class="compare-grid animate delay-1">
<div class="compare-box aggregate">
<h4>TRIPOD</h4>
<ul>
<li>Prediction model reporting</li>
<li>D√©veloppement et validation</li>
<li>Calibrage et discrimination</li>
<li>22 item checklist</li>
</ul>
</div>
<div class="compare-box ipd">
<h4>PRISMA-IPD</h4>
<ul>
<li>IPD meta-analysis reporting</li>
<li>D√©tails de l'acquisition de donn√©es</li>
<li>Harmonization process</li>
<li>Integrity checking</li>
</ul>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">POUR LES MOD√àLES PRONOSTIQUE IPD</div>
<div class="simple-text">
                    You need <strong>both</strong>: TRIPOD pour le mod√®le lui-m√™me, PRISMA-IPD pour le processus de synth√®se des donn√©es.
                  </div>
</div>
</div>
</div>
<!-- Slide 10.5: Clinical Impact -->
<div class="slide hope">
<div class="content text-center">
<div class="title green animate">When Prediction Saves Lives</div>
<div class="story-card animate delay-1">
<div class="place">L'IMPACT CLINIQUE</div>
<div class="narrative">
                    The IMPACT model is now embedded in clinical decision support systems worldwide.
                    <br/><br/>
                    Lorsqu'un patient arrive avec un traumatisme cr√¢nien, le mod√®le fournit une <strong>probability of survival</strong>
                    and <strong>probability of favorable outcome</strong>.
                    <br/><br/>
                    Cela guide les conversations avec les familles. Cela informe sur l‚Äôintensit√© du traitement. Cela aide √† allouer les ressources de l‚ÄôUSI.
                    <br/><br/>
<strong>Construit √† partir de donn√©es individuelles. Servir des patients individuels.</strong>
</div>
</div>
</div>
</div>
<!-- Slide 10.6: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain hope animate">
                  "To predict one patient's future,<br/>
                  vous devez apprendre de milliers de pass√©s.<br/>
                  IPD d√©tient ces histoires...<br/>
                  each one a teacher, if you will listen."
                </div>
</div>
</div>
</div>
 ==================== MODULE 11 : LE PARADOXE DE L'ASPIRINE (ATT) ==================== 
<div class="module-slides" data-module="11">
<!-- Slide 11.1: Opening Sign -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'avez-vous pas pens√© √† la petite tablette blanche<br/>
                  qui a √©t√© donn√© √† <em>millions</em> pour leur c≈ìur ?<br/>
<br/>
                  On leur a dit : <em>"Prends ceci et tu seras prot√©g√©."</em><br/>
<br/>
                  But was every heart equally in need of protection?
                </div>
</div>
</div>
 Diapositive 11.2¬†:¬†L'histoire du prix Netflix 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">L'histoire du prix Netflix</div>
<div class="story-card animate delay-1">
<div class="place">A TRUE STORY</div>
<div class="narrative">
                    In 2006, Netflix released 100 million "anonymized" movie ratings for a $1 million prize.
                    <br/><br/>
                    Researchers quickly re-identified users by matching ratings with public IMDb reviews.
                    <br/><br/>
                    One lawsuit alleged a closeted lesbian was outed through her viewing patterns.
                    <br/><br/>
<strong>The lesson: removing names isn't anonymization.</strong>
<br/><br/>
                    L'IPD contient suffisamment de combinaisons d'√¢ge, de diagnostic, de r√©ponse au traitement et de dates pour identifier de mani√®re unique les individus. La confidentialit√© n√©cessite plus que la suppression de la colonne de nom : elle n√©cessite de comprendre comment les combinaisons de donn√©es deviennent des empreintes digitales.
                  </div>
</div>
</div>
</div>
 Diapositive 11.3¬†:¬†La collaboration sur le TCA 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Oxford, 2009</div>
<div class="story-card animate delay-1">
<div class="place">ANTITHROMBOTIC TRIALISTS' COLLABORATION</div>
<div class="narrative">
                    L‚ÄôATT a collect√© des donn√©es individuelles aupr√®s de <strong>95,000 patients</strong>
                    across 6 primary prevention trials of aspirin.
                    <br/><br/>
                    The published trials said: "Aspirin prevents heart attacks."
                    <br/><br/>
                    Mais l'ATT a pos√© la question interdite :
                    <br/><br/>
<strong>"A quel prix ? Et pour qui ?"</strong>
</div>
<div class="source">ATT Collaboration. Lancet 2009;373:1849-60</div>
</div>
</div>
</div>
 Diapositive 11.4¬†:¬†La r√©v√©lation 
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">Les chiffres r√©v√©l√©s</div>
<div class="stats-grid animate delay-1">
<div class="stat-box" style="border: 2px solid var(--green);">
<div class="stat-value" style="color:var(--green);">-12%</div>
<div class="stat-label">Heart Attacks Prevented</div>
</div>
<div class="stat-box" style="border: 2px solid var(--red);">
<div class="stat-value" style="color:var(--red);">+32%</div>
<div class="stat-label">Major Bleeds Caused</div>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">THE BALANCE</div>
<div class="simple-text">
                    For every <strong>1,000 low-risk patients</strong> prendre de l'aspirine depuis 5 ans :
                    <br/><br/>
<span style="color:var(--green);">2-3 heart attacks prevented</span><br/>
<span style="color:var(--red);">2-3 major bleeds caused</span>
<br/><br/>
<strong>Les avantages et les inconv√©nients s‚Äôannulent.</strong>
</div>
</div>
</div>
</div>
 Diapositive 11.5¬†:¬†L'arbre de d√©cision 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La d√©cision bas√©e sur le risque</div>
<div class="decision-tree animate delay-1">
<h4>Ce patient devrait-il prendre de l‚Äôaspirine en pr√©vention primaire¬†?</h4>
<div class="tree-level">
<div class="tree-node root">10-Year CVD Risk?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 1rem;">
<div>
<div class="tree-node yes" style="background:rgba(34,197,94,0.3);">&gt;20%</div>
<div class="tree-label">High Risk</div>
</div>
<div>
<div class="tree-node question">10-20%</div>
<div class="tree-label">Intermediate</div>
</div>
<div>
<div class="tree-node no" style="background:rgba(197,48,48,0.3);">&lt;10%</div>
<div class="tree-label">Low Risk</div>
</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 1rem;">
<div class="tree-node action">Consider aspirin<br/>(benefit &gt; harm)</div>
<div class="tree-node aggregate">Shared decision<br/>(benefit ‚âà harm)</div>
<div class="tree-node" style="background:rgba(197,48,48,0.5);border-color:var(--red);">Avoid aspirin<br/>(harm &gt; benefit)</div>
</div>
</div>
</div>
</div>
<!-- Slide 11.6: Why Aggregate Failed -->
<div class="slide dark">
<div class="content text-center">
<div class="rhetorical animate">
                  Why did published meta-analyses miss this?
                </div>
<div class="simple-box animate delay-1">
<div class="simple-title">LA C√âCIT√â DES GRANULATS</div>
<div class="simple-text">
                    Published trials reported <strong>average benefits</strong>.
                    <br/><br/>
                    Ils n'ont pas pu d√©montrer que les patients √† haut risque gagnaient<br/>
                    while low-risk patients lost.
                    <br/><br/>
                    Only by examining each patient's baseline risk,<br/>
                    each patient's outcomes,<br/>
                    could the <strong>interaction</strong> be revealed.
                  </div>
</div>
</div>
</div>
<!-- Slide 11.7: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-aspirin">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">Le dilemme de la pr√©vention primaire</span>
</div>
<div class="scenario-situation">
                    Un homme de 52 ans pose des questions sur l'aspirine pour pr√©venir les crises cardiaques. Il n'a aucun ant√©c√©dent de maladie cardiovasculaire, le taux de cholest√©rol est limite, la tension art√©rielle est contr√¥l√©e et il est non-fumeur. Son risque de maladie cardiovasculaire √† 10 ans est de 8 %.
                    <br/><br/>
                    Il a lu en ligne que ¬´ l'aspirine pr√©vient les crises cardiaques ¬ª et souhaite votre avis.
                  </div>
<div class="scenario-question">Que lui dis-tu ?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('aspirin', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">"Yes, take aspirin daily - it's proven to prevent heart attacks"</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('aspirin', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">"At your risk level, aspirin's bleeding risk roughly equals its heart benefit - I'd recommend against it"</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('aspirin', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">"Take baby aspirin - the lower dose is safer"</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-aspirin"></div>
</div>
</div>
</div>
<!-- Slide 11.8: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain warning animate">
                  "Le m√©dicament qui sauve les personnes en voie de disparition<br/>
                  peut nuire √† la s√©curit√©.<br/>
<br/>
                  Connaissez le risque de votre patient avant de prescrire.<br/>
                  C'est ce que nous ont appris les donn√©es individuelles."
                </div>
<div class="gold-line animate delay-2"></div>
<p class="animate delay-3" style="color:rgba(255,255,255,0.6);font-style:italic;">
                  95,000 patients. One truth: risk determines benefit.
                </p>
</div>
</div>
</div>
 ===================== MODULE 12 : LA R√âV√âLATION DE LA TENSION ART√âRIELLE (BPLTTC) ====================== 
<div class="module-slides" data-module="12">
<!-- Slide 12.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'avez-vous pas vu comment ils ont d√©battu pendant des d√©cennies¬†:<br/>
<em>¬´ Les vieux devraient-ils √™tre trait√©s de la m√™me mani√®re que les jeunes ?</em><br/>
<br/>
                  Some said: "Lower is always better."<br/>
                  D'autres disaient : "Les vieux sont fragiles. Soyez prudent."<br/>
<br/>
                  Qui avait raison ?
                </div>
</div>
</div>
 Diapositive 12.2¬†: Le d√©bat 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La controverse sur la courbe en J</div>
<div class="story-card animate delay-1">
<div class="place">CARDIOLOGY CONFERENCES, 1980s-2000s</div>
<div class="narrative">
                    Pendant des ann√©es, les m√©decins ont soutenu :
                    <br/><br/>
<strong>Le camp agressif¬†:</strong> "Every mmHg of BP reduction saves lives.<br/>
                    Treat everyone to target 120/80."
                    <br/><br/>
<strong>Le camp conservateur :</strong> "In the elderly, low BP causes falls, strokes, death.<br/>
                    There's a J-curve‚Äîtoo low is dangerous."
                    <br/><br/>
                    Individual trials were too small to settle it.
                    <strong>Jusqu'√† ce que le BPLTTC collecte les donn√©es individuelles.</strong>
</div>
</div>
</div>
</div>
 Diapositive 12.3¬†:¬†La collaboration 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">The Blood Pressure Lowering Treatment Trialists</div>
<div class="stats-grid animate delay-1">
<div class="stat-box">
<div class="stat-value" style="color:var(--blue);">48</div>
<div class="stat-label">Trials Combined</div>
</div>
<div class="stat-box">
<div class="stat-value" style="color:var(--gold);">344,716</div>
<div class="stat-label">Individual Patients</div>
</div>
<div class="stat-box">
<div class="stat-value" style="color:var(--teal);">15+</div>
<div class="stat-label">Years of Follow-up</div>
</div>
</div>
<div class="simple-box blue animate delay-2">
<div class="simple-title">THE QUESTION</div>
<div class="simple-text">
                    Does the benefit of BP lowering vary by age?
                    <br/>
                    Is there a J-curve at very low pressures?
                    <br/>
                    Do the very old (&gt;80 years) still benefit?
                  </div>
</div>
<div class="source animate delay-3" style="color:rgba(255,255,255,0.5);font-size:0.8rem;margin-top:1rem;">
                  BPLTTC. Lancet 2021;397:1625-36
                </div>
</div>
</div>
 Diapositive 12.4¬†: La r√©ponse 
<div class="slide hope">
<div class="content text-center">
<div class="title green animate">La r√©ponse, enfin</div>
<div class="discovery-box animate delay-1">
<div class="insight">Benefit at Every Age</div>
<div class="label">La r√©duction proportionnelle du risque √©tait constante de 55 √† 85 ans et plus</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">WHAT IPD SHOWED</div>
<div class="simple-text">
<strong>Every 5 mmHg BP reduction:</strong>
<br/><br/>
                    Age 55-64: 10% lower major CV events<br/>
                    Age 65-74: 10% lower major CV events<br/>
                    Age 75-84: 10% lower major CV events<br/>
                    Age ‚â•85: <strong>Still 10% lower</strong>
<br/><br/>
<em>p</em><sub>interaction</sub> = 0,85. Aucune preuve de modification de l'√¢ge.
                  </div>
</div>
</div>
</div>
 Diapositive 12.5¬†:¬†Le mythe de la courbe en J 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Qu‚Äôen est-il de la courbe en J¬†?</div>
<div class="story-card animate delay-1">
<div class="place">THE RESOLUTION</div>
<div class="narrative">
                    Le BPLTTC a test√© une courbe en J en examinant des patients<br/>
                    who achieved very low blood pressures.
                    <br/><br/>
<strong>Result:</strong> No J-curve in randomized comparisons.
                    <br/><br/>
                    La courbe en J apparente dans les donn√©es d'observation √©tait <em>reverse causation</em>‚Äî
                    sick patients have low BP because they're sick,
                    not sick because their BP is low.
                    <br/><br/>
<strong>Seuls les IPD issus d‚ÄôECR pourraient r√©soudre ce probl√®me.</strong>
</div>
</div>
</div>
</div>
<!-- Slide 12.6: Decision Tree -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Treating Hypertension by Age</div>
<div class="decision-tree animate delay-1">
<h4>Should This Elderly Patient Get BP Treatment?</h4>
<div class="tree-level">
<div class="tree-node root">Patient Age?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div class="tree-node yes" style="min-width:80px;">55-74</div>
<div class="tree-node yes" style="min-width:80px;">75-84</div>
<div class="tree-node yes" style="min-width:80px;">85+</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level">
<div class="tree-node action" style="background:var(--green);min-width:300px;">
                      Treat if BP elevated<br/>
<span style="font-size:0.75rem;">Proportional benefit maintained across all ages</span>
</div>
</div>
</div>
<div class="simple-box animate delay-2" style="margin-top:1.5rem;">
<div class="simple-title">THE LESSON</div>
<div class="simple-text">
                    Age alone is not a reason to withhold treatment.
                    <br/>
                    Consider frailty, life expectancy, patient preference‚Äîbut not age.
                  </div>
</div>
</div>
</div>
<!-- Slide 12.7: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-elderly-bp">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">La tension art√©rielle de l'homme de 82 ans</span>
</div>
<div class="scenario-situation">
                    Une femme de 82 ans a une TA 158/88. Elle est ind√©pendante, intacte sur le plan cognitif et n‚Äôa aucun ant√©c√©dent de chute. Un coll√®gue dit : ¬´ Elle est trop vieille pour un traitement agressif de la tension art√©rielle. La courbe en J, vous savez.
                    <br/><br/>
                    Vous vous souvenez de la m√©ta-analyse BPLTTC IPD.
                  </div>
<div class="scenario-question">What do you do?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('elderly-bp', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">D'accord avec votre coll√®gue¬†: acceptez des objectifs de tension art√©rielle plus √©lev√©s pour les personnes √¢g√©es.</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('elderly-bp', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Citer les preuves du BPLTTC selon lesquelles le b√©n√©fice persiste chez les personnes tr√®s √¢g√©es et initier le traitement</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('elderly-bp', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Wait for a cardiovascular event before treating</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-elderly-bp"></div>
</div>
</div>
</div>
<!-- Slide 12.8: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain hope animate">
                  "Ils disaient que les vieux √©taient trop fragiles pour les m√©dicaments.<br/>
                  Mais les donn√©es individuelles ont montr√© le contraire :<br/>
<br/>
                  At every age, the benefit endures.<br/>
                  Do not let age alone deny protection."
                </div>
</div>
</div>
</div>
 &gt;================ MODULE 13 : LA FEN√äTRE DE TEMPS DE COUP ====================== 
<div class="module-slides" data-module="13">
<!-- Slide 13.1: Opening Sign -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'as-tu pas assist√© √† la course contre la montre<br/>
                  when a clot blocks the brain?<br/>
<br/>
                  Every minute, <em>two million neurons die</em>.<br/>
<br/>
                  But when does the window close?<br/>
                  When is it too late to intervene?
                </div>
</div>
</div>
 Diapositive 13.2¬†: Les enjeux 
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">Time Is Brain</div>
<div class="stats-grid animate delay-1">
<div class="stat-box" style="border: 2px solid var(--red);">
<div class="stat-value" style="color:var(--red);">1.9M</div>
<div class="stat-label">Neurons Lost Per Minute</div>
</div>
<div class="stat-box" style="border: 2px solid var(--orange);">
<div class="stat-value" style="color:var(--orange);">14B</div>
<div class="stat-label">Synapses Lost Per Minute</div>
</div>
</div>
<div class="story-card animate delay-2">
<div class="place">THE QUESTION</div>
<div class="narrative">
                    La thrombolyse peut dissoudre le caillot et r√©tablir la circulation sanguine.
                    <br/><br/>
                    But given too late, it causes bleeding into dying brain tissue.
                    <br/><br/>
<strong>What is the time window? 3 hours? 4.5 hours? 6 hours?</strong>
<br/><br/>
                    Individual trials disagreed. Guidelines were uncertain.
                  </div>
</div>
</div>
</div>
 Diapositive 13.3¬†: La solution IPD 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Les essais de thrombolyse accidentelle</div>
<div class="story-card animate delay-1">
<div class="place">STT COLLABORATIVE GROUP, 2014</div>
<div class="narrative">
                    Le STT a collect√© des donn√©es individuelles aupr√®s de <strong>6,756 patients</strong>
                    across 9 major alteplase trials.
                    <br/><br/>
                    They knew <em>exactly</em> when each patient's stroke began.
                    They knew <em>exactly</em> when thrombolysis was given.
                    They knew <em>exactly</em> who lived, who died, who recovered.
                    <br/><br/>
<strong>They could map benefit against time, minute by minute.</strong>
</div>
<div class="source">STT Collaborative Group. Lancet 2014;384:1929-35</div>
</div>
</div>
</div>
 Diapositive 13.4¬†: La courbe temporelle 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La fen√™tre qui s'estompe</div>
<div class="stats-grid animate delay-1">
<div class="stat-box" style="border: 2px solid var(--green);">
<div class="stat-value" style="color:var(--green);">0-3h</div>
<div class="stat-label">OU 1,75 pour un bon r√©sultat</div>
</div>
<div class="stat-box" style="border: 2px solid var(--teal);">
<div class="stat-value" style="color:var(--teal);">3-4.5h</div>
<div class="stat-label">OU 1,26 pour un bon r√©sultat</div>
</div>
<div class="stat-box" style="border: 2px solid var(--orange);">
<div class="stat-value" style="color:var(--orange);">4.5-6h</div>
<div class="stat-label">OR 1.15 (not significant)</div>
</div>
</div>
<div class="simple-box animate delay-2">
<div class="simple-title">LA D√âCROISSANCE DU B√âN√âFICE</div>
<div class="simple-text">
                    Every 15 minutes of delay reduced the benefit.
                    <br/><br/>
                    Treated at 90 min: <strong>1 in 4</strong> achieve excellent outcome<br/>
                    Treated at 180 min: <strong>1 in 7</strong> achieve excellent outcome<br/>
                    Treated at 270 min: <strong>1 in 14</strong> achieve excellent outcome
                  </div>
</div>
</div>
</div>
<!-- Slide 13.5: Decision Tree -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La d√©cision de thrombolyse</div>
<div class="decision-tree animate delay-1">
<h4>Acute Ischemic Stroke: Give Thrombolysis?</h4>
<div class="tree-level">
<div class="tree-node root">Time Since Symptom Onset?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 0.75rem;">
<div>
<div class="tree-node yes" style="background:rgba(34,197,94,0.5);min-width:90px;">0-3h</div>
<div class="tree-label">Strong benefit</div>
</div>
<div>
<div class="tree-node yes" style="background:rgba(0,212,170,0.4);min-width:90px;">3-4.5h</div>
<div class="tree-label">Moderate benefit</div>
</div>
<div>
<div class="tree-node question" style="min-width:90px;">4.5-6h</div>
<div class="tree-label">Uncertain</div>
</div>
<div>
<div class="tree-node no" style="background:rgba(197,48,48,0.5);min-width:90px;">&gt;6h</div>
<div class="tree-label">Harm likely</div>
</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 0.75rem;">
<div class="tree-node action" style="font-size:0.7rem;padding:0.5rem;">TREAT<br/>URGENTLY</div>
<div class="tree-node action" style="font-size:0.7rem;padding:0.5rem;">TREAT<br/>if eligible</div>
<div class="tree-node aggregate" style="font-size:0.7rem;padding:0.5rem;">Consider<br/>imaging</div>
<div class="tree-node" style="background:rgba(197,48,48,0.5);font-size:0.7rem;padding:0.5rem;">Generally<br/>avoid</div>
</div>
</div>
</div>
</div>
 Diapositive 13.6¬†:¬†Pourquoi AD n'a pas pu r√©pondre 
<div class="slide dark">
<div class="content text-center">
<div class="rhetorical animate">
                  Why did we need individual data?
                </div>
<div class="simple-box animate delay-1">
<div class="simple-title">LA LIMITE DES MOYENNES</div>
<div class="simple-text">
                    Trial A: "Patients treated within 3 hours" (average: 2.1 hours)<br/>
                    Trial B: "Patients treated within 6 hours" (average: 4.2 hours)
                    <br/><br/>
                    These <em>overlapping, inconsistent windows</em> couldn't be compared.
                    <br/><br/>
                    Only by knowing <strong>each patient's exact time</strong><br/>
                    could the continuous decay of benefit be mapped.
                  </div>
</div>
</div>
</div>
<!-- Slide 13.7: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-stroke">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">Le coup de 4 heures</span>
</div>
<div class="scenario-situation">
                    Un homme de 68 ans pr√©sente un accident vasculaire c√©r√©bral aigu. Les sympt√¥mes sont apparus il y a 4 heures. Le scanner ne montre aucune h√©morragie, le score NIHSS est de 12 (mod√©r√©). La famille demande : ¬´ Est-il trop tard pour prendre le m√©dicament anti-caillot ?
                    <br/><br/>
                    Door-to-needle time will add 30 minutes, making total time ~4.5 hours.
                  </div>
<div class="scenario-question">What do you do?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('stroke', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">"It's too late - the 3-hour window has passed"</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('stroke', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">"Nous sommes toujours dans le d√©lai de 4,5 heures - proc√©der en urgence √† la thrombolyse"</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('stroke', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">"Wait for MRI to see if there's salvageable tissue"</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-stroke"></div>
</div>
</div>
</div>
<!-- Slide 13.8: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain warning animate">
                  "Every minute the clot remains,<br/>
                  two million neurons perish.<br/>
<br/>
                  L'IPD nous a montr√© la fen√™tre qui s'estompe.<br/>
                  Act quickly, or the window closes forever."
                </div>
</div>
</div>
</div>
 &gt;=================== MODULE 14 : DONNEES MANQUANTES DANS IPD ===================== 
<div class="module-slides" data-module="14">
<!-- Slide 14.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  Vous avez rassembl√© les donn√©es individuelles.<br/>
                  Vous ouvrez les dossiers avec espoir.<br/>
<br/>
                  Et puis tu vois √ßa : <em>empty cells</em>.<br/>
<br/>
                  Age: 67. Sex: Male. Smoking status: <em>missing</em>.<br/>
                  Outcome at 1 year: <em>missing</em>.<br/>
<br/>
                  What now?
                </div>
</div>
</div>
 Diapositive 14.2¬†: Les trois types 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Les trois types de disparitions</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number" style="background:var(--green);">1</div>
<div class="lesson-content">
<h4>Missing Completely at Random (MCAR)</h4>
<p>Lab machine broke randomly. No relation to patient characteristics. <strong>Safe to ignore (but wasteful).</strong></p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number" style="background:var(--orange);">2</div>
<div class="lesson-content">
<h4>Missing at Random (MAR)</h4>
<p>Older patients more likely to miss follow-up. Missingness related to <em>observed</em> variables. <strong>Imputation can help.</strong></p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number" style="background:var(--red);">3</div>
<div class="lesson-content">
<h4>Manquant pas au hasard (MNAR)</h4>
<p>Les patients dont les r√©sultats sont m√©diocres abandonnent. Manque li√© au <em>missing value itself</em>. <strong>Dangereux. N√©cessite une analyse de sensibilit√©.</strong></p>
</div>
</div>
</div>
</div>
 Diapositive 14.3¬†:¬†L'arbre de d√©cision 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Gestion des donn√©es manquantes</div>
<div class="decision-tree animate delay-1">
<h4>Que faire des valeurs manquantes¬†?</h4>
<div class="tree-level">
<div class="tree-node root">How much is missing?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 1.5rem;">
<div>
<div class="tree-node yes" style="background:rgba(34,197,94,0.3);">&lt;5%</div>
<div class="tree-label">Minor</div>
</div>
<div>
<div class="tree-node question">5-20%</div>
<div class="tree-label">Moderate</div>
</div>
<div>
<div class="tree-node no" style="background:rgba(197,48,48,0.3);">&gt;20%</div>
<div class="tree-label">Substantial</div>
</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 1.5rem;">
<div class="tree-node action" style="font-size:0.75rem;">Complete case<br/>may suffice</div>
<div class="tree-node ipd" style="font-size:0.75rem;">Multiple<br/>imputation</div>
<div class="tree-node aggregate" style="font-size:0.75rem;">Impute +<br/>sensitivity</div>
</div>
</div>
</div>
</div>
<!-- Slide 14.4: Multiple Imputation -->
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">Imputation multiple¬†: la norme</div>
<div class="formula-box animate delay-1">
<div class="label">THE PROCESS</div>
<div class="formula">1. Impute ‚Üí 2. Analyze ‚Üí 3. Pool</div>
<div class="label">Create M imputed datasets, analyze each, combine using Rubin's rules</div>
</div>
<div class="simple-box blue animate delay-2">
<div class="simple-title">WHY MULTIPLE?</div>
<div class="simple-text">
                    L'imputation unique pr√©tend que vous connaissez la valeur manquante.
                    <br/><br/>
                    Multiple imputation (M=20-50 datasets) reflects <strong>uncertainty</strong>
                    sur ce qu'aurait pu √™tre la valeur manquante.
                    <br/><br/>
                    Cela pr√©serve les erreurs standard et les valeurs p valides.
                  </div>
</div>
</div>
</div>
<!-- Slide 14.5: IPD-Specific Issues -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">D√©fis li√©s aux donn√©es manquantes sp√©cifiques √† l'IPD</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number">1</div>
<div class="lesson-content">
<h4>Systematically Missing Variables</h4>
<p>Trial A measured biomarker X. Trial B didn't. Can't impute what was never collected.</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number">2</div>
<div class="lesson-content">
<h4>Multilevel Structure</h4>
<p>Patients nested within trials. Imputation model must account for clustering.</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number">3</div>
<div class="lesson-content">
<h4>Different Follow-up Durations</h4>
<p>L'essai A a suivi pendant 2 ans. Essai B pendant 5 ans. L‚Äôanalyse de survie n√©cessite des soins.</p>
</div>
</div>
</div>
</div>
<!-- Slide 14.6: Decision Tree for Systematically Missing -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">When a Variable Is Missing Entirely</div>
<div class="decision-tree animate delay-1">
<h4>Trial Didn't Collect Your Key Covariate</h4>
<div class="tree-level">
<div class="tree-node root">Is it an effect modifier or confounder?</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div>
<div class="tree-node question">Effect Modifier</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node aggregate" style="font-size:0.75rem;">Restrict interaction<br/>analysis to trials<br/>avec la variable</div>
</div>
<div>
<div class="tree-node question">Confounder</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node ipd" style="font-size:0.75rem;">Sensitivity analysis<br/>varying assumptions<br/>about unmeasured</div>
</div>
</div>
</div>
</div>
</div>
<!-- Slide 14.7: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-missing">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">Le biomarqueur manquant</span>
</div>
<div class="scenario-situation">
                    Votre IPD-MA teste si un nouveau m√©dicament anticanc√©reux fonctionne mieux chez les patients pr√©sentant un biomarqueur positif. Vous avez un IPD apr√®s 8 essais. Mais 3 essais (40 % des patients) n‚Äôont pas du tout mesur√© le biomarqueur.
                    <br/><br/>
                    Ces 3 essais ont tendance √† √™tre plus anciens et plus petits.
                  </div>
<div class="scenario-question">Comment analysez-vous l‚Äôinteraction ?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('missing', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">Impute the biomarker status based on other patient characteristics</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('missing', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Analyser l'interaction uniquement dans les 5 essais avec des donn√©es de biomarqueurs¬†; analyse de sensibilit√© comprenant tous les essais pour l'effet global</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('missing', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Exclure enti√®rement les 3 essais de la m√©ta-analyse</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-missing"></div>
</div>
</div>
</div>
<!-- Slide 14.8: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain animate">
                  "La cellule vide n'est pas rien.<br/>
                  It is a question: <em>Pourquoi est-ce inconnu ?</em><br/>
<br/>
                  R√©pondez √† cette question avant de combler le vide...<br/>
                  car la raison de l'absence fa√ßonne la solution."
                </div>
</div>
</div>
</div>
 ==================== MODULE 15¬†: LE PI√àGE DE DISPONIBILIT√â ==================== 
<div class="module-slides" data-module="15">
<!-- Slide 15.1: Opening -->
<div class="slide black active">
<div class="content text-center">
<div class="rhetorical animate">
                  N'avez-vous pas vu le chercheur<br/>
                  qui a collect√© des donn√©es aupr√®s de <em>willing</em> trialists<br/>
                  et d√©clar√© la victoire ?<br/>
<br/>
                  But the <em>unwilling</em> held secrets.<br/>
                  Et ces secrets ont tout chang√©.
                </div>
</div>
</div>
 Diapositive 15.2¬†:¬†L'histoire du Tamiflu 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">L'histoire du Tamiflu</div>
<div class="story-card animate delay-1">
<div class="place">A TRUE STORY</div>
<div class="narrative">
                    Pendant des ann√©es, les gouvernements ont stock√© du Tamiflu pour lutter contre la grippe pand√©mique, d√©pensant des milliards.
                    <br/><br/>
                    Cochrane reviewers requested trial data to verify efficacy. Roche refused, citing confidentiality.
                    <br/><br/>
                    Pendant cinq ans, le BMJ a fait campagne pour la transparence. Lorsque les rapports complets des √©tudes cliniques ont finalement √©t√© publi√©s en 2014, la situation a chang√© : le Tamiflu a r√©duit la dur√©e des sympt√¥mes de moins d'une journ√©e et n'a pas √©vit√© les complications.
                    <br/><br/>
<strong>Des milliards d√©pens√©s pour un m√©dicament dont toutes les preuves √©taient conserv√©es sous cl√©.</strong>
<br/><br/>
                    La saga Tamiflu a transform√© les attentes : aujourd'hui, la transparence des essais cliniques devient la norme, et non l'exception.
                  </div>
</div>
</div>
</div>
 Diapositive 15.3¬†: Les donn√©es probantes 
<div class="slide blood">
<div class="content text-center">
<div class="title red animate">When IPD Is Selectively Available</div>
<div class="simple-box animate delay-1">
<div class="simple-title">LES CONSTATATIONS EMPIRIQUES</div>
<div class="simple-text">
                    Des √©tudes ont compar√© les essais qui partagent une IIP √† ceux qui √Ä ne pas faire¬†:
                    <br/><br/>
<strong>Industry-sponsored trials:</strong> Less likely to share<br/>
<strong>Essais avec des r√©sultats n√©gatifs¬†:</strong> Less likely to share<br/>
<strong>Older trials:</strong> Donn√©es souvent perdues
                    <br/><br/>
                    If these trials systematically differ in effect size,<br/>
<strong>votre IPD-MA est biais√©e.</strong>
</div>
</div>
<div class="source animate delay-2" style="color:rgba(255,255,255,0.5);font-size:0.8rem;margin-top:1rem;">
                  Ahmed I, et al. BMJ 2012;344:d7762
                </div>
</div>
</div>
 Diapositive 15.4¬†: La comparaison 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">Always Compare: IPD vs. Non-IPD Trials</div>
<div class="decision-tree animate delay-1">
<h4>Assessing Availability Bias</h4>
<div class="tree-level">
<div class="tree-node root">Compare AD effects: trials with IPD vs. without</div>
</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-level" style="gap: 2rem;">
<div>
<div class="tree-node yes">Similar Effects</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node action" style="font-size:0.75rem;">Low concern<br/>for bias</div>
</div>
<div>
<div class="tree-node no">Different Effects</div>
<div class="tree-arrow">‚Üì</div>
<div class="tree-node" style="background:rgba(197,48,48,0.5);font-size:0.75rem;">High concern<br/>Sensibilit√© analyse n√©cessaire</div>
</div>
</div>
</div>
</div>
</div>
 Diapositive 15.5¬†: La liste de contr√¥le 
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">La liste de contr√¥le du biais de disponibilit√©</div>
<div class="lesson-item animate delay-1">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Report IPD retrieval rate</h4>
<p>"Nous avons obtenu l'IPD √† partir de 12/15 essais (80%)"</p>
</div>
</div>
<div class="lesson-item animate delay-2">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Compare IPD vs. non-IPD trial characteristics</h4>
<p>Taille de l'√©chantillon, financement, date de publication, taille de l'effet √† partir de l'ensemble donn√©es</p>
</div>
</div>
<div class="lesson-item animate delay-3">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Sensitivity analysis including non-IPD trials</h4>
<p>Analyse en deux √©tapes combinant IPD + AD √† partir d'essais sans partage</p>
</div>
</div>
<div class="lesson-item animate delay-4">
<div class="lesson-number" style="background:var(--green);">‚úì</div>
<div class="lesson-content">
<h4>Discutez des raisons de non-partage</h4>
<p>Data lost? Refused? Never requested? Each has different implications.</p>
</div>
</div>
</div>
</div>
<!-- Slide 15.6: Branching Scenario -->
<div class="slide gradient">
<div class="content text-center">
<div class="scenario-panel animate" id="scenario-availability">
<div class="scenario-header">
<span class="scenario-icon">üîÄ</span>
<span class="scenario-title">Les essais r√©ticents</span>
</div>
<div class="scenario-situation">
                    Votre IPD-MA d'une intervention chirurgicale a obtenu les donn√©es de 8 sur 12 essais √©ligibles (67 %). Les 4 essais sans partage sont tous financ√©s par l'industrie et montrent des b√©n√©fices moindres dans leurs publications (OR pool√© 0,95) par rapport aux 8 essais IPD (OR pool√© 0,72).
                    <br/><br/>
                    Votre analyse IPD montre un OR 0,70.
                  </div>
<div class="scenario-question">Comment faites-vous votre rapport ceci¬†?</div>
<div class="scenario-choices">
<div class="scenario-choice" onclick="selectScenarioChoice('availability', 'a')">
<span class="choice-letter">A</span>
<span class="choice-text">Report IPD result (OR 0.70) as the main finding - IPD is gold standard</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('availability', 'b')">
<span class="choice-letter">B</span>
<span class="choice-text">Rapportez le r√©sultat de l'IPD avec un avertissement important concernant le biais de disponibilit√© et l'analyse de sensibilit√©, y compris AD √† partir d'essais sans partage</span>
</div>
<div class="scenario-choice" onclick="selectScenarioChoice('availability', 'c')">
<span class="choice-letter">C</span>
<span class="choice-text">Wait until you get 100% IPD before publishing</span>
</div>
</div>
<div class="scenario-consequence" id="consequence-availability"></div>
</div>
</div>
</div>
 Diapositive 15.7¬†: L'approche combin√©e 
<div class="slide ipd">
<div class="content text-center">
<div class="title blue animate">La solution hybride en deux √©tapes</div>
<div class="formula-box animate delay-1">
<div class="label">COMBINING IPD + AD</div>
<div class="formula">Stage 1: Analyze IPD trials ‚Üí get Œ∏<sub>IPD</sub></div>
<div class="formula">Stage 2: Meta-analyze Œ∏<sub>IPD</sub> + Œ∏<sub>AD</sub> de non-IPD essais</div>
<div class="label">Uses all available evidence, even when IPD incomplete</div>
</div>
<div class="simple-box blue animate delay-2">
<div class="simple-title">THE PRINCIPLE</div>
<div class="simple-text">
<strong>L'IPD n'est pas tout ou rien.</strong>
<br/><br/>
                    Utilisez l'IPD l√† o√π vous l'avez (pour les tests d'interaction).<br/>
                    Compl√©tez avec AD pour l'estimation de l'effet global.<br/>
                    Transparence sur ce qui est issu o√π.
                  </div>
</div>
</div>
</div>
<!-- Slide 15.8: Refrain -->
<div class="slide black">
<div class="content text-center">
<div class="refrain warning animate">
                  "Le vouloir peut ne pas repr√©senter le tout.<br/>
                  Les portes ouvertes peuvent cacher la v√©rit√© derri√®re des portes verrouill√©es.<br/>
<br/>
                  Always ask: Who refused to share?<br/>
                  And what might they be hiding?"
                </div>
</div>
</div>
</div>
 ===================== MODULE 16¬†: QUIZ ET R√âF√âRENCES ==================== 
<div class="module-slides" data-module="16">
<!-- Slide 11.1: Quiz 1 -->
<div class="slide dark active">
<div class="content text-center">
<div class="quiz-container animate">
<div class="quiz-question">Qu'est-ce que le groupe d'essais sur le cancer du sein pr√©coce a d√©couvert que les essais individuels n'ont pas pu¬†?</div>
<div class="quiz-options">
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Tamoxifen works better than placebo</div>
<div class="quiz-option" onclick="checkAnswer(this, true)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Tamoxifen only works in estrogen receptor positive tumors</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Tamoxifen has significant side effects</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Tamoxifen works better in younger women</div>
</div>
<div class="quiz-feedback"></div>
</div>
</div>
</div>
<!-- Slide 11.2: Quiz 2 -->
<div class="slide dark">
<div class="content text-center">
<div class="quiz-container animate">
<div class="quiz-question">What is the "ecological fallacy" in meta-analysis?</div>
<div class="quiz-options">
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Assuming environmental factors don't affect treatment</div>
<div class="quiz-option" onclick="checkAnswer(this, true)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Assuming between-study relationships apply to within-study (individual) relationships</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Regrouper les √©tudes de diff√©rentes r√©gions √©cologiques</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Using outdated trials in modern meta-analyses</div>
</div>
<div class="quiz-feedback"></div>
</div>
</div>
</div>
<!-- Slide 11.3: Quiz 3 -->
<div class="slide dark">
<div class="content text-center">
<div class="quiz-container animate">
<div class="quiz-question">Quand une analyse IPD en une √©tape est-elle pr√©f√©r√©e √† en deux √©tapes¬†?</div>
<div class="quiz-options">
<div class="quiz-option" onclick="checkAnswer(this, true)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">When trials have sparse events or rare outcomes</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">When you have many large trials</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">When you want to create forest plots</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Lorsque les r√©sultats sont courants et le suivi est court</div>
</div>
<div class="quiz-feedback"></div>
</div>
</div>
</div>
<!-- Slide 11.4: Quiz 4 -->
<div class="slide dark">
<div class="content text-center">
<div class="quiz-container animate">
<div class="quiz-question">Que devez-vous faire avant d'analyser l'IPD de plusieurs essais¬†?</div>
<div class="quiz-options">
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Regrouper imm√©diatement toutes les donn√©es et ex√©cuter l'analyse principale</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Exclude trials with missing variables</div>
<div class="quiz-option" onclick="checkAnswer(this, true)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Reproduire les r√©sultats publi√©s de chaque essai √† partir de l'IPD pour v√©rifier les donn√©es int√©grit√©</div>
<div class="quiz-option" onclick="checkAnswer(this, false)" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" role="button" tabindex="0">Convert all continuous variables to categorical</div>
</div>
<div class="quiz-feedback"></div>
</div>
</div>
</div>
<!-- Slide 11.5: References -->
<div class="slide dark">
<div class="content text-center">
<div class="title gold animate">References</div>
<div class="references animate delay-1">
<h4>Sources cl√©s cit√©es dans ce document Cours</h4>
<ol>
<li>Riley RD, et al. <span class="journal">M√©ta-analyse des donn√©es des participants individuels¬†: un manuel pour la recherche sur les soins de sant√©.</span> Wiley, 2021.</li>
<li>Stewart LA, et al. PRISMA-IPD¬†: √©l√©ments de rapport pr√©f√©r√©s pour les revues syst√©matiques et les m√©ta-analyses des donn√©es des participants individuels. <span class="journal">JAMA</span> 2015;313:1657-65.</li>
<li>Early Breast Cancer Trialists' Collaborative Group. Tamoxifen for early breast cancer. <span class="journal">Cochrane Database Syst Rev</span> 2001.</li>
<li>Cholesterol Treatment Trialists' Collaboration. Efficacy and safety of LDL-lowering therapy. <span class="journal">Lancet</span> 2010;376:1670-81.</li>
<li>Roberts D, et al. Antenatal corticosteroids for accelerating fetal lung maturation. <span class="journal">Cochrane Database Syst Rev</span> 2017.</li>
<li>IMPACT Study Group. Predicting outcome after traumatic brain injury. <span class="journal">PLoS Med</span> 2008;5:e165.</li>
<li>Debray TPA, et al. Get real in individual participant data meta-analysis. <span class="journal">Int J Epidemiol</span> 2015;44:1287-97.</li>
<li>Burke DL, et al. Meta-analysis using individual participant data. <span class="journal">Stat Med</span> 2017;36:320-38.</li>
</ol>
</div>
</div>
</div>
<!-- Slide 11.6: Completion -->
<div class="slide hope">
<div class="content text-center">
<div class="big-number green animate" style="font-size:5rem;">‚úî</div>
<div class="title green animate delay-1">Course Complete</div>
<div class="gold-line animate delay-2"></div>
<div class="refrain hope animate delay-3">
                  "Dans l'ensemble, l'individu dispara√Æt.<br/>
                  But you have learned to find them.<br/>
                  You have learned to ask: Who benefits? Who is harmed?<br/>
<br/>
                  Maintenant, allez-y et ne laissez aucun patient dispara√Ætre dans la moyenne."
                </div>
<p class="animate delay-4" style="color:var(--gold);font-family:'Cormorant Garamond',serif;font-size:1.2rem;margin-top:1.5rem;">
                  Le patient cach√© ‚Äî Vous les voyez maintenant.
                </p>
<button aria-label="Obtenez votre certificat de r√©ussite" class="btn primary animate delay-5" onclick="showCertificate()" style="margin-top:2rem;padding:1rem 2rem;font-size:1.1rem;">
                  üéì Obtenez votre certificat
                </button>
</div>
</div>
</div>
<!-- Navigation -->
<nav aria-label="Slide navigation" class="slide-nav" role="navigation">
<button aria-label="Previous slide" class="nav-btn" onclick="prevSlide()" title="Previous slide (Left arrow)">‚Üê</button>
<div class="nav-center">
<div aria-atomic="true" aria-live="polite" class="slide-counter" id="slideCounter">1 / 6</div>
<div aria-label="Slide indicators" class="progress" id="progressDots" role="tablist"></div>
</div>
<button aria-label="Next slide" class="nav-btn" onclick="nextSlide()" title="Next slide (Right arrow or Space)">‚Üí</button>
</nav>
</div>
</div>
</main>
</div>
<script>
    function toggleSidebar() {
      document.querySelector('.sidebar').classList.toggle('open');
      var overlay = document.querySelector('.sidebar-overlay');
      if (overlay) overlay.classList.toggle('show');
      var btn = document.querySelector('.mobile-menu-toggle, .sidebar-toggle, .hamburger');
      if (btn) btn.setAttribute('aria-expanded', btn.getAttribute('aria-expanded') === 'true' ? 'false' : 'true');
    }

    const modules = [
      { id: 1, title: "The Vanishing", subtitle: "Why IPD matters", slides: 6 },
      { id: 2, title: "Aggregate vs IPD", subtitle: "L'erreur √©cologique", slides: 6 },
      { id: 3, title: "La r√©v√©lation CTT", subtitle: "Statins for 170,000", slides: 6 },
      { id: 4, title: "When to Pursue IPD", subtitle: "L'arbre de d√©cision", slides: 6 },
      { id: 5, title: "One-Stage vs Two-Stage", subtitle: "Analysis approaches", slides: 6 },
      { id: 6, title: "La d√©couverte du timing", subtitle: "Corticosteroids & preterm birth", slides: 6 },
      { id: 7, title: "Obtaining IPD", subtitle: "La qu√™te des donn√©es", slides: 6 },
      { id: 8, title: "Data Harmonization", subtitle: "Speaking one language", slides: 6 },
      { id: 9, title: "Testing Interactions", subtitle: "Who benefits most?", slides: 6 },
      { id: 10, title: "Prognosis & Prediction", subtitle: "IMPACT et au-del√†", slides: 6 },
      { id: 11, title: "Le paradoxe de l'aspirine", subtitle: "ATT: Risk determines benefit", slides: 8 },
      { id: 12, title: "The BP Revelation", subtitle: "BPLTTC : L'√¢ge n'est pas une barri√®re", slides: 8 },
      { id: 13, title: "La fen√™tre AVC", subtitle: "Time is brain", slides: 8 },
      { id: 14, title: "Missing Data", subtitle: "Les cellules vides", slides: 8 },
      { id: 15, title: "La disponibilit√© Pi√®ge", subtitle: "Who refused to share?", slides: 8 },
      { id: 16, title: "Quiz & Sources", subtitle: "Testez vos connaissances", slides: 6 }
    ];

    // State management with localStorage persistence
    const STORAGE_KEY = 'ipd-course-progress';

    function loadProgress() {
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          const data = JSON.parse(saved);
          return {
            currentModule: Math.min(Math.max(1, data.currentModule || 1), modules.length),
            currentSlide: Math.max(1, data.currentSlide || 1),
            completedModules: new Set(data.completedModules || [])
          };
        }
      } catch (e) {
        console.warn('Could not load progress:', e);
      }
      return { currentModule: 1, currentSlide: 1, completedModules: new Set() };
    }

    function saveProgress() {
      try {
        const data = {
          currentModule,
          currentSlide,
          completedModules: Array.from(completedModules)
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      } catch (e) {
        console.warn('Could not save progress:', e);
      }
    }

    // Initialize state from localStorage or defaults
    const savedState = loadProgress();
    let currentModule = savedState.currentModule;
    let currentSlide = savedState.currentSlide;
    const completedModules = savedState.completedModules;

    // Branching scenarios
    const scenarios = {
      'ipd-decision': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Raccourci dangereux¬†! Le groupe de travail REACT de l‚ÄôOMS a √©tudi√© l‚ÄôIPD pour les st√©ro√Ødes COVID et a d√©couvert des interactions cruciales : le b√©n√©fice √©tait plus √©vident chez les patients n√©cessitant de l‚Äôoxyg√®ne. L\'analyse globale aurait manqu√© cette nuance qui a fa√ßonn√© la pratique clinique.', lesson: 'Lorsque la question est ¬´¬†qui en profite¬†¬ª, l\'IPD n\'est pas facultative.' },
          'b': { type: 'good', text: 'Correct¬†! Votre question sur la modification des effets en fonction de la gravit√© et du calendrier n√©cessite des donn√©es au niveau du patient. L\'analyse IPD du groupe REACT a montr√© que les b√©n√©fices de la dexam√©thasone √©taient concentr√©s chez les patients sous oxyg√®ne, guidant un traitement cibl√©.' , lesson: 'IPD is essential when testing treatment-covariate interactions.' },
          'c': { type: 'neutral', text: 'Tentant mais imparfait. Les cat√©gories de niveau d\'essai diff√®rent¬†: le niveau "s√©v√®re" de l\'essai A peut √™tre "mod√©r√©" dans l\'essai B. Vous compareriez des pommes et des oranges. Seul l\'IPD vous permet d\'appliquer des d√©finitions de gravit√© coh√©rentes √† tous les patients.', lesson: 'L\'analyse globale des sous-groupes souffre d\'une erreur √©cologique.' }
        }
      },
      'harmonization': {
        correct: 'c',
        consequences: {
          'a': { type: 'bad', text: 'Risible¬†! Les diff√©rentes d√©finitions des r√©sultats pourraient expliquer les effets plus importants de ces essais (des d√©finitions plus souples capturent plus d\'√©v√©nements). Les inclure sans accus√© de r√©ception pourrait gonfler votre estimation globale.', lesson: 'Definition heterogeneity is a form of bias. Acknowledge it.' },
          'b': { type: 'neutral', text: 'Conservateur mais risque de perdre des informations pr√©cieuses. Les essais des ann√©es 1990 pourraient avoir port√© sur diff√©rentes populations qui m√©riteraient d\'√™tre √©tudi√©es. L\'exclusion compl√®te doit √™tre justifi√©e et non r√©flexive.', lesson: 'L\'exclusion est une d√©cision lourde de cons√©quences. Documentez votre raisonnement.' },
          'c': { type: 'good', text: 'Correct¬†! Cette approche donne une estimation primaire claire tout en explorant la robustesse. Si les r√©sultats changent consid√©rablement avec les essais non standardis√©s, il s\'agit d\'informations importantes sur la sensibilit√© √† la d√©finition des r√©sultats.', lesson: 'Sensitivity analyses reveal what depends on your assumptions.' }
        }
      },
      'interaction': {
        correct: 'c',
        consequences: {
          'a': { type: 'bad', text: 'Overinterpretation! With 8 tests at alpha=0.05, you expect ~0.4 false positives by chance. A single p=0.03 after multiple testing is not compelling evidence of true effect modification.', lesson: 'Multiple testing inflates false positive risk. Adjust or acknowledge.' },
          'b': { type: 'neutral', text: 'Statistically appropriate (Bonferroni: 0.05/8 = 0.006 threshold) but perhaps too rigid. Biological plausibility matters too - older patients have higher stroke risk, so larger relative benefit is mechanistically sensible.', lesson: 'Statistics and biology should inform each other.' },
          'c': { type: 'good', text: 'Correct¬†! L\'approche scientifique consiste √† rendre compte de mani√®re transparente de la nature exploratoire, √† reconna√Ætre les tests multiples et √† appeler √† une validation externe. Le constat est int√©ressant mais pas d√©finitif.', lesson: 'Subgroup findings require replication before changing practice.' }
        }
      },
      'aspirin': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Simplification excessive dangereuse ! L\'analyse ATT IPD de 95 000 patients a montr√© que chez les individus √† faible risque (comme ce patient avec 8 % de risque sur 10 ans), les dommages h√©morragiques sont √† peu pr√®s √©gaux au b√©n√©fice cardiovasculaire. Vous l\'exposeriez √† un risque de saignement pour un b√©n√©fice net n√©gligeable.', lesson: 'Average benefit masks risk-stratified truth. Not everyone benefits equally.' },
          'b': { type: 'good', text: 'Correct¬†! L\'ATT IPD-MA a d√©montr√© que le rapport b√©n√©fice-risque de l\'aspirine d√©pend du risque de base de maladie cardiovasculaire. Avec un risque de 8 % sur 10 ans, le nombre n√©cessaire √† traiter et le nombre n√©cessaire pour nuire sont similaires. Les directives actuelles (AHA 2019) d√©conseillent l\'aspirine de routine en pr√©vention primaire √† faible risque.', lesson: 'IPD a r√©v√©l√© l\'interaction risque-b√©n√©fice que les agr√©gats cachaient.' },
          'c': { type: 'bad', text: 'La dose ne change pas le probl√®me fondamental. L\'aspirine √† faible dose augmente encore les saignements. L‚ÄôATT a montr√© que l‚Äô√©quilibre b√©n√©fice/inconv√©nient d√©pend du risque de base et non de la dose. √Ä faible risque de maladie cardiovasculaire, m√™me l\'aspirine pour b√©b√© cause plus de mal que de bien.', lesson: 'Changing the dose doesn\'t fix an indication problem.' }
        }
      },
      'elderly-bp': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Le mythe de la courbe en J a √©t√© d√©mystifi√© par les preuves IPD. La m√©ta-analyse BPLTTC portant sur 344¬†716 patients a montr√© que le b√©n√©fice proportionnel de la r√©duction de la pression art√©rielle est maintenu m√™me chez les patients de ‚â• 85 ans. Le nihilisme du traitement bas√© sur l\'√¢ge prive d\'une pr√©vention efficace ceux qui pourraient en b√©n√©ficier le plus (risque absolu plus √©lev√©).', lesson: 'La courbe en J dans les donn√©es d\'observation √©tait une causalit√© inverse et non un pr√©judice du traitement.' },
          'b': { type: 'good', text: 'Correct! The BPLTTC IPD-MA found no interaction between age and treatment benefit (p=0.85). A fit 82-year-old with elevated BP stands to gain from treatment. Consider frailty and life expectancy, but not age alone.', lesson: 'L\'IPD issue des ECR l\'emporte sur les associations √©cologiques issues des √©tudes observationnelles.' },
          'c': { type: 'bad', text: 'Attendre un accident vasculaire c√©r√©bral ou un IM avant de traiter va √† l‚Äôencontre de l‚Äôobjectif de la pr√©vention. Le BPLTTC a montr√© des travaux de pr√©vention primaire √† tous les √¢ges. Attendre sous surveillance chez un patient avec une indication claire est nocif.', lesson: 'La pr√©vention signifie traiter avant l\'√©v√©nement, pas apr√®s.' }
        }
      },
      'stroke': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Outdated thinking! The STT IPD analysis showed benefit extends to 4.5 hours, and the 2018 guidelines expanded the window. The 3-hour cutoff was from earlier, smaller trials. Every minute counts, but 4 hours is not too late.', lesson: 'IPD allowed continuous modeling of time-benefit relationship.' },
          'b': { type: 'good', text: 'Correct¬†! Le STT IPD-MA a d√©montr√© que le b√©n√©fice de la thrombolyse, bien que diminu√©, persiste jusqu\'√† 4,5 heures. √Ä 4-4,5 heures, le OU pour un bon r√©sultat est toujours d\'environ 1,26. Agissez de toute urgence¬†: chaque minute de retard suppl√©mentaire r√©duit les b√©n√©fices.', lesson: 'IPD a r√©v√©l√© la courbe de d√©croissance que des fen√™tres d\'essai discr√®tes masquaient.' },
          'c': { type: 'bad', text: 'Dangerous delay! MRI takes time you don\'t have. The STT showed benefit declines continuously with time. At 4 hours, you\'re already in the diminishing returns zone. Standard CT to rule out hemorrhage is sufficient; adding MRI delays treatment when every minute costs neurons.', lesson: 'Perfect is the enemy of good when time is brain.' }
        }
      },
      'missing': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Imputation risqu√©e¬†! Vous ne pouvez pas imputer de mani√®re fiable un biomarqueur qui n‚Äôa jamais √©t√© mesur√© sur la base d‚Äôautres caract√©ristiques. Il s‚Äôagit de donn√©es ¬´ syst√©matiquement manquantes ¬ª ‚Äì l‚Äôimputation serait une sp√©culation d√©guis√©e en analyse. Le m√©canisme d\'absence est MNAR (les essais qui ne l\'ont pas mesur√© peuvent avoir des raisons).', lesson: 'Vous ne pouvez pas imputer ce qui n\'a jamais √©t√© collect√©. Il s\'agit d\'une fabrication, pas d\'une imputation.' },
          'b': { type: 'good', text: 'Correct! Interaction analysis should be restricted to trials with the data. For the overall effect, you can include all trials (two-stage: IPD from 5 trials + AD from 3 trials). This maximizes appropriate use of available data while maintaining validity for each analysis type.', lesson: 'Diff√©rentes questions peuvent utiliser diff√©rents sous-ensembles de vos donn√©es.' },
          'c': { type: 'neutral', text: 'Trop agressif¬†! Ces 3 essais apportent des informations valides sur l\'effet global du traitement, m√™me s\'ils ne peuvent pas renseigner sur l\'interaction des biomarqueurs. Les exclure enti√®rement gaspille des preuves et peut introduire un biais de s√©lection s\'ils diff√®rent syst√©matiquement.', lesson: 'Exclusion should be proportionate to the problem.' }
        }
      },
      'availability': {
        correct: 'b',
        consequences: {
          'a': { type: 'bad', text: 'Alerte de biais de disponibilit√©¬†! Les essais sans partage montrent des effets nettement plus faibles (OR 0,95 contre 0,70). Signaler uniquement les r√©sultats de l‚ÄôIPD sans reconna√Ætre cet √©cart reviendrait √† surestimer l‚Äôeffet du traitement. Souvent, les essais industriels ne partagent pas de donn√©es n√©gatives.', lesson: 'Available IPD may be a biased sample of all evidence.' },
          'b': { type: 'good', text: 'Correct! Transparent reporting includes: (1) IPD retrieval rate, (2) comparison of IPD vs non-IPD trial characteristics and effects, (3) sensitivity analysis combining IPD + AD. This lets readers judge the impact of availability bias.', lesson: 'IPD quality cannot compensate for selection bias in which trials share.' },
          'c': { type: 'neutral', text: '100¬†% IPD est id√©al mais rarement r√©alisable. Attendre ind√©finiment signifie que les preuves ne sont jamais synth√©tis√©es. Mieux vaut proc√©der √† des mises en garde et √† des analyses de sensibilit√© appropri√©es plut√¥t que de laisser le parfait √™tre l‚Äôennemi du bien.', lesson: 'Some IPD with caveats beats no synthesis at all.' }
        }
      }
    };

    let scenarioState = {};

    function selectScenarioChoice(scenarioId, choice) {
      if (scenarioState[scenarioId]) return;

      scenarioState[scenarioId] = choice;
      const scenario = scenarios[scenarioId];
      const consequence = scenario.consequences[choice];
      const isCorrect = choice === scenario.correct;

      // Update choice styling
      const panel = document.getElementById(`scenario-${scenarioId}`);
      const choices = panel.querySelectorAll('.scenario-choice');
      choices.forEach(c => {
        c.classList.add('answered');
        const letter = c.querySelector('.choice-letter').textContent.toLowerCase();
        if (letter === scenario.correct) c.classList.add('correct');
        if (letter === choice && !isCorrect) c.classList.add('incorrect');
      });

      // Show consequence
      const conseqDiv = document.getElementById(`consequence-${scenarioId}`);
      conseqDiv.innerHTML = `
        <div class="consequence-title">${isCorrect ? '&#10003; Good decision!' : '&#10007; Problematic decision'}</div>
        <div class="consequence-text">${consequence.text}</div>
        <div class="consequence-lesson">"${consequence.lesson}"</div>
      `;
      conseqDiv.classList.add('visible', consequence.type);
    }

    function init() {
      // Restore saved progress - activate correct module and slide
      if (currentModule > 1 || currentSlide > 1) {
        // Deactivate default first module
        document.querySelectorAll('.module-slides').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.slide').forEach(el => el.classList.remove('active'));

        // Activate saved module
        const targetModuleEl = document.querySelector(`.module-slides[data-module="${currentModule}"]`);
        if (targetModuleEl) {
          targetModuleEl.classList.add('active');

          // Activate saved slide within module
          const slides = targetModuleEl.querySelectorAll('.slide');
          const targetSlideIndex = Math.min(currentSlide - 1, slides.length - 1);
          if (slides[targetSlideIndex]) {
            slides[targetSlideIndex].classList.add('active');
          }
        }

        // Update breadcrumb
        const moduleTitle = modules[currentModule - 1];
        if (moduleTitle) {
          document.getElementById('currentModule').textContent = moduleTitle.title;
        }

        // Progress restored: Module ${currentModule}, Slide ${currentSlide}
      }

      renderModuleList();
      updateSlideNav();

      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        // Don't intercept if user is in an input/interactive field
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' ||
            e.target.tagName === 'SELECT' || e.target.tagName === 'BUTTON' ||
            e.target.tagName === 'A' ||
            (e.target.getAttribute && e.target.getAttribute('role') === 'button')) return;

        if (e.key === 'ArrowRight' || e.key === ' ') {
          e.preventDefault();
          nextSlide();
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          prevSlide();
        } else if (e.key === 'Home') {
          e.preventDefault();
          goToModule(1);
        } else if (e.key === 'End') {
          e.preventDefault();
          goToModule(modules.length);
        }
      });

      // Touch swipe support for mobile
      let touchStartX = 0;
      let touchEndX = 0;
      const slidesContainer = document.getElementById('main-content');

      if (slidesContainer) {
        slidesContainer.addEventListener('touchstart', (e) => {
          touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        slidesContainer.addEventListener('touchend', (e) => {
          touchEndX = e.changedTouches[0].screenX;
          handleSwipe();
        }, { passive: true });
      }

      function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;
        if (Math.abs(diff) > swipeThreshold) {
          if (diff > 0) {
            nextSlide(); // Swipe left = next
          } else {
            prevSlide(); // Swipe right = prev
          }
        }
      }

      // Save progress before user leaves
      window.addEventListener('beforeunload', saveProgress);

      // Announce initial slide to screen readers
      announceSlide();

      // Show initial progress percentage
      updateProgressPercent();
    }

    // Accessibility: Announce slide changes to screen readers
    function announceSlide() {
      const module = modules[currentModule - 1];
      if (!module) return;

      const announcement = `Module ${currentModule}: ${module.title}. Slide ${currentSlide} of ${module.slides}.`;
      const liveRegion = document.getElementById('ariaLiveRegion');
      if (liveRegion) {
        liveRegion.textContent = announcement;
      }

      updateProgressPercent();
    }

    // Update completion percentage display
    function updateProgressPercent() {
      const totalSlides = modules.reduce((sum, m) => sum + m.slides, 0);
      let completedSlides = 0;

      // Count slides in completed modules
      completedModules.forEach(moduleId => {
        const mod = modules.find(m => m.id === moduleId);
        if (mod) completedSlides += mod.slides;
      });

      // Add current progress in current module
      completedSlides += currentSlide - 1;

      const percent = Math.round((completedSlides / totalSlides) * 100);
      const progressEl = document.getElementById('progressPercent');
      if (progressEl) {
        progressEl.textContent = `Progress: ${percent}%`;
      }
    }

    function renderModuleList() {
      const list = document.getElementById('moduleList');
      list.innerHTML = modules.map(m => `
        <div class="module-item ${m.id === currentModule ? 'active' : ''} ${completedModules.has(m.id) ? 'completed' : ''}"
             onclick="goToModule(${m.id})"
             onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();event.stopPropagation();goToModule(${m.id});}"
             role="listitem"
             tabindex="0"
             aria-label="Module ${m.id}: ${m.title}. ${m.subtitle}. ${completedModules.has(m.id) ? 'Completed.' : ''} ${m.id === currentModule ? 'Current module.' : ''}"
             aria-current="${m.id === currentModule ? 'true' : 'false'}">
          <div class="module-number" aria-hidden="true">${completedModules.has(m.id) ? '&#10003;' : m.id}</div>
          <div class="module-info">
            <div class="module-title">${m.title}</div>
            <div class="module-subtitle">${m.subtitle}</div>
          </div>
        </div>
      `).join('');
    }

    function goToModule(moduleId) {
      // Bounds checking
      if (moduleId < 1 || moduleId > modules.length) {
        console.warn(`Invalid module ID: ${moduleId}. Must be between 1 and ${modules.length}.`);
        return;
      }

      if (moduleId > currentModule) completedModules.add(currentModule);
      currentModule = moduleId;

      // Ensure slide is within bounds for new module
      const targetModule = modules[moduleId - 1];
      currentSlide = Math.min(Math.max(1, currentSlide), targetModule.slides);
      currentSlide = 1; // Start at first slide of new module

      document.querySelectorAll('.module-slides').forEach(el => el.classList.remove('active'));
      const targetModuleEl = document.querySelector(`.module-slides[data-module="${moduleId}"]`);
      if (targetModuleEl) {
        targetModuleEl.classList.add('active');
      }

      updateSlideVisibility();
      updateSlideNav();
      renderModuleList();

      const moduleTitle = modules[moduleId - 1];
      if (moduleTitle) {
        document.getElementById('currentModule').textContent = moduleTitle.title;
      }

      saveProgress();
      announceSlide();
    }

    function updateSlideVisibility() {
      const moduleSlides = document.querySelector(`.module-slides[data-module="${currentModule}"]`);
      if (!moduleSlides) {
        console.warn(`Module slides not found for module ${currentModule}`);
        return;
      }
      const slides = moduleSlides.querySelectorAll('.slide');
      slides.forEach((slide, index) => slide.classList.toggle('active', index + 1 === currentSlide));
    }

    function updateSlideNav() {
      const module = modules[currentModule - 1];
      if (!module) {
        console.warn(`Module data not found for index ${currentModule - 1}`);
        return;
      }
      const slideCounter = document.getElementById('slideCounter');
      const progressDots = document.getElementById('progressDots');
      if (slideCounter) {
        slideCounter.textContent = `${currentSlide} / ${module.slides}`;
      }
      if (progressDots) {
        progressDots.innerHTML = Array.from({ length: module.slides }, (_, i) =>
          `<div class="progress-dot ${i + 1 === currentSlide ? 'active' : ''}"
                onclick="goToSlide(${i + 1})"
                onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();event.stopPropagation();goToSlide(${i + 1});}"
                role="tab"
                tabindex="${i + 1 === currentSlide ? '0' : '-1'}"
                aria-selected="${i + 1 === currentSlide ? 'true' : 'false'}"
                aria-label="Go to slide ${i + 1}"></div>`
        ).join('');
      }
    }

    // Reset progress function (can be called from console or UI)
    function resetProgress() {
      try {
        localStorage.removeItem(STORAGE_KEY);
        currentModule = 1;
        currentSlide = 1;
        completedModules.clear();

        // Reset UI
        document.querySelectorAll('.module-slides').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.slide').forEach(el => el.classList.remove('active'));

        const firstModule = document.querySelector('.module-slides[data-module="1"]');
        if (firstModule) {
          firstModule.classList.add('active');
          const firstSlide = firstModule.querySelector('.slide');
          if (firstSlide) firstSlide.classList.add('active');
        }

        document.getElementById('currentModule').textContent = modules[0].title;
        renderModuleList();
        updateSlideNav();
        updateProgressPercent();
        announceSlide();

        // Progress reset successfully
      } catch (e) {
        console.error('Failed to reset progress:', e);
      }
    }

    function goToSlide(slideNum) {
      // Bounds checking
      const module = modules[currentModule - 1];
      if (!module || slideNum < 1 || slideNum > module.slides) {
        console.warn(`Invalid slide number: ${slideNum}. Must be between 1 and ${module ? module.slides : '?'}.`);
        return;
      }

      currentSlide = slideNum;
      updateSlideVisibility();
      updateSlideNav();
      saveProgress();
      announceSlide();
    }

    function nextSlide() {
      // Bounds checking
      if (currentModule < 1 || currentModule > modules.length) {
        console.warn('Invalid current module state');
        currentModule = 1;
        currentSlide = 1;
        saveProgress();
        return;
      }

      const module = modules[currentModule - 1];
      if (!module) return;

      if (currentSlide < module.slides) {
        currentSlide++;
        updateSlideVisibility();
        updateSlideNav();
        saveProgress();
        announceSlide();
      } else if (currentModule < modules.length) {
        goToModule(currentModule + 1);
      }
      // If at last slide of last module, do nothing (already handled)
    }

    function prevSlide() {
      // Bounds checking
      if (currentModule < 1 || currentModule > modules.length) {
        console.warn('Invalid current module state');
        currentModule = 1;
        currentSlide = 1;
        saveProgress();
        return;
      }

      if (currentSlide > 1) {
        currentSlide--;
        updateSlideVisibility();
        updateSlideNav();
        saveProgress();
        announceSlide();
      } else if (currentModule > 1) {
        // Bounds check for previous module
        const prevModuleIndex = currentModule - 2;
        if (prevModuleIndex < 0 || prevModuleIndex >= modules.length) {
          console.warn('Invalid previous module index');
          return;
        }

        const prevModuleSlides = modules[prevModuleIndex].slides;
        currentModule--;
        currentSlide = prevModuleSlides;

        document.querySelectorAll('.module-slides').forEach(el => el.classList.remove('active'));
        const targetModuleEl = document.querySelector(`.module-slides[data-module="${currentModule}"]`);
        if (targetModuleEl) {
          targetModuleEl.classList.add('active');
        }

        updateSlideVisibility();
        updateSlideNav();
        renderModuleList();

        const moduleTitle = modules[currentModule - 1];
        if (moduleTitle) {
          document.getElementById('currentModule').textContent = moduleTitle.title;
        }

        saveProgress();
        announceSlide();
      }
      // If at first slide of first module, do nothing (already handled)
    }

    function checkAnswer(element, isCorrect) {
      const container = element.closest('.quiz-container');
      const options = container.querySelectorAll('.quiz-option');
      const feedback = container.querySelector('.quiz-feedback');

      options.forEach(opt => {
        opt.style.pointerEvents = 'none';
        if (opt === element) opt.classList.add(isCorrect ? 'correct' : 'incorrect');
      });

      feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
      feedback.innerHTML = isCorrect
        ? '<strong>Correct!</strong> You understand the key concept.'
        : '<strong>Not quite.</strong> Review the module to understand why.';
    }

    // ==================== THEME TOGGLE ====================
    function toggleTheme() {
      const body = document.body;
      const themeBtn = document.getElementById('themeToggle');
      const isLight = body.classList.toggle('light-theme');

      // Update button icon
      if (themeBtn) {
        themeBtn.textContent = isLight ? 'üåô' : '‚òÄÔ∏è';
        themeBtn.setAttribute('aria-label', isLight ? 'Switch to dark mode' : 'Switch to light mode');
      }

      // Save preference
      try {
        localStorage.setItem('ipd-course-theme', isLight ? 'light' : 'dark');
      } catch (e) {
        console.warn('Could not save theme preference');
      }
    }

    function loadTheme() {
      try {
        const savedTheme = localStorage.getItem('ipd-course-theme');
        const themeBtn = document.getElementById('themeToggle');

        if (savedTheme === 'light') {
          document.body.classList.add('light-theme');
          if (themeBtn) {
            themeBtn.textContent = 'üåô';
            themeBtn.setAttribute('aria-label', 'Switch to dark mode');
          }
        }
      } catch (e) {
        console.warn('Could not load theme preference');
      }
    }

    // ==================== CERTIFICATE ====================
    function showCertificate() {
      const modal = document.getElementById('certificateModal');
      const dateEl = document.getElementById('certDate');

      if (modal) {
        modal.classList.add('visible');

        // Set current date
        if (dateEl) {
          const now = new Date();
          const options = { year: 'numeric', month: 'long', day: 'numeric' };
          dateEl.textContent = `Completed on ${now.toLocaleDateString('en-US', options)}`;
        }

        // Focus the name input
        const nameInput = document.getElementById('certName');
        if (nameInput) {
          setTimeout(() => nameInput.focus(), 100);
        }
      }
    }

    function closeCertificate() {
      const modal = document.getElementById('certificateModal');
      if (modal) {
        modal.classList.remove('visible');
      }
    }

    function printCertificate() {
      const name = document.getElementById('certName')?.value || 'Course Participant';
      const certContent = document.getElementById('certificateContent');

      if (!certContent) return;

      // Temporarily replace input with name text
      const nameInput = document.getElementById('certName');
      const originalHTML = nameInput?.outerHTML;
      if (nameInput) {
        const nameSpan = document.createElement('span');
        nameSpan.className = 'certificate-name';
        nameSpan.textContent = name;
        nameInput.replaceWith(nameSpan);
      }

      // Hide action buttons for print
      const actions = certContent.querySelector('.certificate-actions');
      const closeBtn = certContent.querySelector('.certificate-close');
      if (actions) actions.style.display = 'none';
      if (closeBtn) closeBtn.style.display = 'none';

      // Print
      const printWindow = window.open('', '_blank');
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Certificate - IPD Meta-Analysis Course</title>
          <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">
          <style>
            body { margin: 0; padding: 2rem; font-family: 'Cormorant Garamond', Georgia, serif; }
            .certificate {
              background: linear-gradient(135deg, #faf8f5 0%, #fff 100%);
              border: 8px solid #D4AF37;
              border-radius: 12px;
              padding: 3rem;
              max-width: 700px;
              margin: 0 auto;
              text-align: center;
            }
            .certificate-header { font-size: 2.5rem; color: #1E2761; margin-bottom: 0.5rem; }
            .certificate-subtitle { font-size: 1rem; color: #718096; margin-bottom: 2rem; letter-spacing: 0.2em; text-transform: uppercase; }
            .certificate-body { font-size: 1.2rem; color: #2D3748; line-height: 1.8; margin-bottom: 2rem; }
            .certificate-name { font-size: 2rem; font-weight: 700; color: #1E2761; border-bottom: 2px solid #D4AF37; display: inline-block; padding: 0 2rem 0.5rem; margin: 1rem 0; }
            .certificate-date { font-size: 0.9rem; color: #718096; margin-top: 1.5rem; }
            .certificate-seal { width: 80px; height: 80px; background: linear-gradient(135deg, #D4AF37, #B8860B); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 1.5rem auto 0; color: white; font-size: 2rem; }
          </style>
        </head>
        <body>
          ${certContent.innerHTML}
        </body>
        </html>
      `);
      printWindow.document.close();
      printWindow.print();

      // Restore original state
      if (actions) actions.style.display = '';
      if (closeBtn) closeBtn.style.display = '';
      const nameSpan = certContent.querySelector('.certificate-name');
      if (nameSpan && originalHTML) {
        nameSpan.outerHTML = originalHTML;
      }
    }

    function downloadCertificate() {
      const name = document.getElementById('certName')?.value || 'Course Participant';
      const dateEl = document.getElementById('certDate')?.textContent || '';

      // Create a canvas-based certificate image
      const canvas = document.createElement('canvas');
      canvas.width = 1000;
      canvas.height = 700;
      const ctx = canvas.getContext('2d');

      // Background gradient
      const gradient = ctx.createLinearGradient(0, 0, 1000, 700);
      gradient.addColorStop(0, '#faf8f5');
      gradient.addColorStop(1, '#ffffff');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 1000, 700);

      // Border
      ctx.strokeStyle = '#D4AF37';
      ctx.lineWidth = 16;
      ctx.strokeRect(20, 20, 960, 660);

      // Inner border
      ctx.strokeStyle = '#1E2761';
      ctx.lineWidth = 2;
      ctx.strokeRect(40, 40, 920, 620);

      // Header
      ctx.fillStyle = '#1E2761';
      ctx.font = 'bold 48px Georgia, serif';
      ctx.textAlign = 'center';
      ctx.fillText('Certificate of Completion', 500, 120);

      // Subtitle
      ctx.fillStyle = '#718096';
      ctx.font = '18px Arial, sans-serif';
      ctx.letterSpacing = '0.2em';
      ctx.fillText('INDIVIDUAL PARTICIPANT DATA META-ANALYSIS', 500, 160);

      // Body text
      ctx.fillStyle = '#2D3748';
      ctx.font = '22px Georgia, serif';
      ctx.fillText('This certifies that', 500, 240);

      // Name
      ctx.fillStyle = '#1E2761';
      ctx.font = 'bold 36px Georgia, serif';
      ctx.fillText(name, 500, 300);

      // Name underline
      const nameWidth = ctx.measureText(name).width;
      ctx.strokeStyle = '#D4AF37';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(500 - nameWidth/2 - 20, 315);
      ctx.lineTo(500 + nameWidth/2 + 20, 315);
      ctx.stroke();

      // More body text
      ctx.fillStyle = '#2D3748';
      ctx.font = '22px Georgia, serif';
      ctx.fillText('has successfully completed the course', 500, 380);
      ctx.font = 'bold 24px Georgia, serif';
      ctx.fillText('"The Hidden Patient: IPD Meta-Analysis"', 500, 420);
      ctx.font = '18px Georgia, serif';
      ctx.fillText('demonstrating understanding of individual participant data', 500, 460);
      ctx.fillText('synthesis methods and their clinical applications.', 500, 485);

      // Date
      ctx.fillStyle = '#718096';
      ctx.font = '16px Arial, sans-serif';
      ctx.fillText(dateEl, 500, 540);

      // Seal
      ctx.fillStyle = '#D4AF37';
      ctx.beginPath();
      ctx.arc(500, 610, 40, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = 'white';
      ctx.font = 'bold 36px Arial, sans-serif';
      ctx.fillText('‚úì', 500, 625);

      // Download
      const link = document.createElement('a');
      link.download = `IPD-Certificate-${name.replace(/[^a-zA-Z0-9\s-]/g, '').replace(/\s+/g, '-')}.png`;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    // Close certificate with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCertificate();
      }
    });

    // Close certificate when clicking outside
    document.getElementById('certificateModal')?.addEventListener('click', (e) => {
      if (e.target.id === 'certificateModal') {
        closeCertificate();
      }
    });

    // ==================== INIT ====================
    init();
    loadTheme();
  </script>
</body>
</html>
